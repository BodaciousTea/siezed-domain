"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}
function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}
class App{constructor(){var _window$experiment_co,_window$experiment_co2,_window$campaign_conf,_window$experiment_co4,_window,_window$experiment_co5,_window$experiment_co6,_flowData2,_window$experiment_co7,_window$campaign_conf2,_window2,_window2$experiment_c,_window4,_window4$experiment_c,_window5,_window5$experiment_c,_window6,_window6$experiment_c;window.addEventListener('popstate',event=>{event.preventDefault();window.location.reload();});this.localStorageTempData={};if(window.appInstance)return window.appInstance;this.eventApi='';this.maxEventTrackId='';window.pixelFiredData=[];window.leagenLocalStorage={};this.domainName=this.getDomainName();this.enablePushNamiOverlay=((_window$experiment_co=window.experiment_config)===null||_window$experiment_co===void 0?void 0:_window$experiment_co.enablePushNamiOverlay)||false;window.fluentListenerRegistered=window.fluentListenerRegistered||false;this.pushOverlayCollapsed=false;window.notificationCheck=false;this.publishDomEvents('appConstructorCalled',{});if((_window$experiment_co2=window.experiment_config)!==null&&_window$experiment_co2!==void 0&&_window$experiment_co2.enableLuckyOrange){var _window$experiment_co3;window.__lo_site_id=((_window$experiment_co3=window.experiment_config)===null||_window$experiment_co3===void 0?void 0:_window$experiment_co3.lo_id)||202539;window._loq=window._loq||[];window._loq.push(["tag","session_id_"+session_id]);var wa=document.createElement('script');wa.type='text/javascript';wa.async=true;wa.src='https://d10lpsik1i8c69.cloudfront.net/w.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(wa,s);}
if((_window$campaign_conf=window.campaign_config)!==null&&_window$campaign_conf!==void 0&&_window$campaign_conf.enableSentryClient||(_window$experiment_co4=window.experiment_config)!==null&&_window$experiment_co4!==void 0&&_window$experiment_co4.enableSentryClient){this.loadSentryJS();}
if((_window=window)!==null&&_window!==void 0&&(_window$experiment_co5=_window.experiment_config)!==null&&_window$experiment_co5!==void 0&&_window$experiment_co5.enableLanderBackButtonOveride){setTimeout(()=>{var _flowData;var currentUrl=new URL(window.location.href);currentUrl.hash=(_flowData=flowData)===null||_flowData===void 0?void 0:_flowData.flow_page_slug;window.history.pushState({},"",currentUrl.href);},400);}
if((_window$experiment_co6=window.experiment_config)!==null&&_window$experiment_co6!==void 0&&_window$experiment_co6.enableJobCookieData&&((_flowData2=flowData)===null||_flowData2===void 0?void 0:_flowData2.flow_page_slug)=='lander'){var _eventTracker=new LEADGEN.tracker();this.getJobCookieData().then(x=>{for(var a in x){if(x[a]){if(a=='userDOB'){var dob=new Date(Date.parse(x[a]));if(!isNaN(dob)){var month=dob.getMonth()+1;month=month<10?'0'+month:''+month;var date=dob.getDate()<10?'0'+dob.getDate():''+dob.getDate();localStorage.setItem('survey-prefix-dobmonth',month);localStorage.setItem('survey-prefix-dobyear',dob.getFullYear());localStorage.setItem('survey-prefix-dobdate',date);}}else{localStorage.setItem('survey-prefix-'+a,x[a]);}}}
this.loadFromLocalStorage();if(window.minimumPiiRequired){var exist=this.isMinimumProfileScoreExist(x,window.minimumPiiRequired);if(exist){if(document.getElementsByClassName('form-with-email')){for(var _a of document.getElementsByClassName('form-with-email')){_a.remove();}}
if(document.getElementsByClassName('form-with-only-zip')){_eventTracker.trackCustomEvent('block','imp','userflow',{event:'UserFlow',flowtypeshown:'DupFlow'});for(var _a2 of document.getElementsByClassName('form-with-only-zip')){_a2.style.display='block';}}
window.jobDataExists=true;}else{if(document.getElementsByClassName('form-with-email')){_eventTracker.trackCustomEvent('block','imp','userflow',{event:'UserFlow',flowtypeshown:'NewUserFlow'});for(var _a3 of document.getElementsByClassName('form-with-email')){_a3.style.display='block';}}
if(document.getElementsByClassName('form-with-only-zip')){for(var _a4 of document.getElementsByClassName('form-with-only-zip')){_a4.remove();}}}}
this.populatePiiInputValues(x);}).catch(err=>{if(document.getElementsByClassName('form-with-email')){_eventTracker.trackCustomEvent('block','imp','userflow',{event:'UserFlow',flowtypeshown:'NewUserFlow'});for(var a of document.getElementsByClassName('form-with-email')){a.style.display='block';}}
if(document.getElementsByClassName('form-with-only-zip')){for(var _a5 of document.getElementsByClassName('form-with-only-zip')){_a5.remove();}}});}else{var _eventTracker2=new LEADGEN.tracker();if(document.getElementsByClassName('form-with-email')){_eventTracker2.trackCustomEvent('block','imp','userflow',{event:'UserFlow',flowtype:'NewUserFlow'});for(var a of document.getElementsByClassName('form-with-email')){a.style.display='block';}}
if(document.getElementsByClassName('form-with-only-zip')){for(var _a6 of document.getElementsByClassName('form-with-only-zip')){_a6.remove();}}}
if((_window$experiment_co7=window.experiment_config)!==null&&_window$experiment_co7!==void 0&&_window$experiment_co7.enableGoogleRecaptcha||(_window$campaign_conf2=window.campaign_config)!==null&&_window$campaign_conf2!==void 0&&_window$campaign_conf2.enableGoogleRecaptcha){this.loadGoogleCaptcha();}
if(!((_window2=window)!==null&&_window2!==void 0&&(_window2$experiment_c=_window2.experiment_config)!==null&&_window2$experiment_c!==void 0&&_window2$experiment_c.disableJournayaOnLander)){this.checkAndLoadJournaya();}
window.addEventListener('pageshow',function(event){var historyTraversal=event.persisted||typeof window.performance!='undefined'&&window.performance.navigation.type===2;if(historyTraversal){var _window3,_window3$experiment_c;if((_window3=window)!==null&&_window3!==void 0&&(_window3$experiment_c=_window3.experiment_config)!==null&&_window3$experiment_c!==void 0&&_window3$experiment_c.redirectToLinkoutOnBack){var _flowData3;if(flowData.next_page=='linkout'){var app=new App();app.redirectToJobFullfillment();return;}
var currentPageSlug=((_flowData3=flowData)===null||_flowData3===void 0?void 0:_flowData3.flow_page_slug)||'notavailable';var whiteList=['lander','register-step1','register-step2','register-step3','register-step4'];if(whiteList!==null&&whiteList!==void 0&&whiteList.includes(currentPageSlug)){var _app=new App();_app.redirectToLinkout();}else{window.location.reload();}}else{window.location.reload();}}});this.getTestStatus();if(window.isV2Version){this.onContentLoad();}else{window.addEventListener('DOMContentLoaded',()=>{this.onContentLoad();});}
this.pushNamiEventListner();var enableProfileCheck=((_window4=window)===null||_window4===void 0?void 0:(_window4$experiment_c=_window4.experiment_config)===null||_window4$experiment_c===void 0?void 0:_window4$experiment_c.enableAutoRedirectRegUser)||((_window5=window)===null||_window5===void 0?void 0:(_window5$experiment_c=_window5.experiment_config)===null||_window5$experiment_c===void 0?void 0:_window5$experiment_c.enableAutoPopulateDBRegUser)||((_window6=window)===null||_window6===void 0?void 0:(_window6$experiment_c=_window6.experiment_config)===null||_window6$experiment_c===void 0?void 0:_window6$experiment_c.enableAutoRedirectRegUserToLinkout);if(enableProfileCheck){var _window7;if((_window7=window)!==null&&_window7!==void 0&&_window7.customData.user_profile){for(var _a7 in(_window8=window)===null||_window8===void 0?void 0:_window8.customData.user_profile){var _window8,_window9;if((_window9=window)!==null&&_window9!==void 0&&_window9.customData.user_profile[_a7]){var _window10;localStorage.setItem('survey-prefix-'+_a7,(_window10=window)===null||_window10===void 0?void 0:_window10.customData.user_profile[_a7]);}}}}
if(typeof window.getGender!=='function'){window.getGender=function(){try{var _event;document.getElementById('gendervalue').value=(_event=event)===null||_event===void 0?void 0:_event.target.value;document.getElementById('gendervalue').classList.remove('error');}catch(e){console.log('get gender upper fn error');}};}
if(window.isV2Version){this.addMouseTouchEvents();this.appendDynamicFooterLink();}
window.appInstance=this;this.fluentEventsListener();if(window.isV2Version){window.dispatchEvent(new CustomEvent("appjsloaded"));}}
redirectToJobFullfillment(){var _arguments=arguments,_this=this;return _asyncToGenerator(function*(){var _document,_document$querySelect,_flowData4;var is403Redirect=_arguments.length>0&&_arguments[0]!==undefined?_arguments[0]:false;var zipcode=((_document=document)===null||_document===void 0?void 0:(_document$querySelect=_document.querySelector('#zipcode'))===null||_document$querySelect===void 0?void 0:_document$querySelect.value)||localStorage.getItem('survey-prefix-zipcode')||null;if(zipcode){var url=config.hostApi+'/api/survey/set-custom-data';yield _this.postApi(url,{customData:{zipcode}});}
var currentPageSlug=((_flowData4=flowData)===null||_flowData4===void 0?void 0:_flowData4.flow_page_slug)||'notavailable';var flow=_this.getFlowParam();var base64Code=flow.base64Code||localStorage.getItem('base64code');var iss=flow.iss||config.hostApi+'/api/';var eventTracker=new LEADGEN.tracker();eventTracker.trackCustomEventPromise('skip','section',currentPageSlug,{event:is403Redirect?"RedirectToFulfillmentOn403":"RedirectToFulfillmentOnBack"}).then(()=>{_this.fetchAndRedirect(iss+'survey/redirect-to-linkout?flow='+base64Code+'&page=app-wall&direct=true'+(is403Redirect?"&skipReason=RedirectToFulfillmentOn403":''));});})();}
pendingEventsToBeFired(){var eventTracker=new LEADGEN.tracker();var _loop=function _loop(index){var exist=localStorage.getItem('event_queue_'+index);if(exist){var _event2=JSON.parse(exist);if((_event2===null||_event2===void 0?void 0:_event2.session_id)==session_id){eventTracker.trackCustomEventPromise(_event2.event_name,_event2.event_type,_event2.event_value,_event2.event_data).then(()=>{localStorage.removeItem('event_queue_'+index);});}else{localStorage.removeItem('event_queue_'+index);}}};for(var index=0;index<10;index++){_loop(index);}}
pushEventToQueue(event_name,event_type,event_value,event_data){for(var index=0;index<10;index++){var exist=localStorage.getItem('event_queue_'+index);if(!exist){localStorage.setItem('event_queue_'+index,JSON.stringify({event_name,event_type,event_value,event_data,session_id}));break;}}}
redirectToLinkout(){var _this2=this;return _asyncToGenerator(function*(){var _document2,_document2$querySelec,_flowData5;var zipcode=((_document2=document)===null||_document2===void 0?void 0:(_document2$querySelec=_document2.querySelector('#zipcode'))===null||_document2$querySelec===void 0?void 0:_document2$querySelec.value)||localStorage.getItem('survey-prefix-zipcode')||null;if(zipcode){var url=config.hostApi+'/api/survey/set-custom-data';yield _this2.postApi(url,{customData:{zipcode}});}
var currentPageSlug=((_flowData5=flowData)===null||_flowData5===void 0?void 0:_flowData5.flow_page_slug)||'notavailable';var flow=_this2.getFlowParam();var base64Code=flow.base64Code||localStorage.getItem('base64code');var iss=flow.iss||config.hostApi+'/api/';var eventTracker=new LEADGEN.tracker();eventTracker.trackCustomEventPromise('skip','section',currentPageSlug,{event:"RedirectToLinkoutOnBack"}).then(()=>{_this2.fetchAndRedirect(iss+'survey/redirect-to-linkout?flow='+base64Code+'&page=linkout&direct=true');});})();}
populatePiiInputValues(object){var mapping={userfname:'userFname',userlname:'userLname',emailaddress:'emailAddress',cityname:'cityName',statecode:'stateCode',zipcode:'zipcode',mobile:'mobile',useraddress:'userAddress',gendervalue1:'gender'};var landerform=document.getElementById('landerform');for(var key in object){if(Object.hasOwnProperty.call(object,key)){var value=object[key];if(value){var keyMap=key;if(mapping[key]){keyMap=mapping[key];}
if(!this.isElementExists(keyMap,'name')){var el=document.createElement("input");el.name=keyMap;el.value=value;el.type='hidden';landerform.append(el);}}}}}
fetchAndRedirect(url){if(window.isSpa){this.postApi(url).then(x=>{this.redirectFunctionality(x.response);});return;}
window.location.href=url;}
getunderTheTabOffers(){this.getApi(config.hostApi+'/api/survey/getUnderTheTabsOffers').then(resp=>{console.log('getUnderTheTabsOffers :'+JSON.stringify(resp));window.underTheTabOfferPrepopUrl=resp===null||resp===void 0?void 0:resp.underTheTabOfferPrepopUrl;window.underTheTabOfferId=resp===null||resp===void 0?void 0:resp.offerId;localStorage.setItem('underTheTabOfferPrepopUrl',JSON.stringify(resp===null||resp===void 0?void 0:resp.underTheTabOfferPrepopUrl));localStorage.setItem('underTheTabOfferId',resp===null||resp===void 0?void 0:resp.offerId);}).catch(error=>{console.log(error);});}
executeUnderTheTabOffers(url){var _window11;var underTheTabUrl=((_window11=window)===null||_window11===void 0?void 0:_window11.underTheTabOfferPrepopUrl)||JSON.parse(localStorage.getItem('underTheTabOfferPrepopUrl'))||null;if(underTheTabUrl){var _window12;var underTheTabOfferId=((_window12=window)===null||_window12===void 0?void 0:_window12.underTheTabOfferId)||localStorage.getItem('underTheTabOfferId')||null;var _eventTracker3=new LEADGEN.tracker();_eventTracker3.trackCustomEvent('page','redirect','underTheTabOffer',{event:'underTheTabOfferRedirect',offeruid:underTheTabOfferId});window.open(url,'_blank');window.location.href=underTheTabUrl;}else{window.location.href=url;}}
redirectFunctionality(res){var _window$campaign_conf3,_window$experiment_co8;var openInNewTab=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var enableUnderTheTabFeature=((_window$campaign_conf3=window.campaign_config)===null||_window$campaign_conf3===void 0?void 0:_window$campaign_conf3.enableUnderTheTabFeature)||((_window$experiment_co8=window.experiment_config)===null||_window$experiment_co8===void 0?void 0:_window$experiment_co8.enableUnderTheTabFeature);if(window.isSpa){window.globalAccessToken=res.accessToken;document.getElementById("router-outlet").innerHTML="";document.body.style.display='none';var nextPageScript=document.createElement("script");nextPageScript.src="".concat(res.nextPageUrl,"?token=").concat(window.campaign_data.flowHash);nextPageScript.async=true;window.history.pushState({},"","https://".concat(window.location.hostname,"/wc/").concat(res.currentpage,"?flow=").concat(res.accessToken));document.body.appendChild(nextPageScript);if(enableUnderTheTabFeature&&flowData&&flowData.flow_page_slug==='lander'){this.executeUnderTheTabOffers("https://".concat(window.location.hostname,"/wc/").concat(res.currentpage,"?flow=").concat(res.accessToken));}
return;}
if(enableUnderTheTabFeature&&flowData&&flowData.flow_page_slug==='lander'){this.executeUnderTheTabOffers("".concat(res.nextPageUrl,"?flow=").concat(res.accessToken));return;}
if(openInNewTab){window.open("".concat(res.nextPageUrl,"?flow=").concat(res.accessToken),'_blank');}else{window.location.href="".concat(res.nextPageUrl,"?flow=").concat(res.accessToken);}}
onContentLoad(){if(window.notificationCheck!=true){var _window13,_window13$experiment_;window.notificationCheck=true;if(flowData&&flowData.flow_page_slug==='lander'&&(_window13=window)!==null&&_window13!==void 0&&(_window13$experiment_=_window13.experiment_config)!==null&&_window13$experiment_!==void 0&&_window13$experiment_.pushObj){if(this.isIOS()!=true&&!('Notification'in window)){var _eventTracker4=new LEADGEN.tracker();_eventTracker4.trackCustomEvent('imp','section','lander',{event:'NotificationObjectNotFound'});}}}
if(window.blacklistLoader!=true){window.blacklistLoader=true;var saScript=document.createElement('script');saScript.src='js/blacklist.js';saScript.async='async';saScript.onload=()=>{try{this.handleProfanityCheck=this.handleProfanityCheck.bind(this);}catch(e){}};document.body.appendChild(saScript);}
var inputs=document.getElementsByTagName('input');var textareas=document.getElementsByTagName('textarea');var select=document.getElementsByTagName('select');for(var _i=0;_i<inputs.length;_i++){inputs[_i].onblur=event=>{this.handleProfanityCheck(event);};}
for(var i=0;i<inputs.length;i++){inputs[i].addEventListener('change',event=>{this.removeErrorBlock(event);});}
for(var i=0;i<textareas.length;i++){textareas[i].onblur=event=>{this.handleProfanityCheck(event);};}
for(var _i2=0;_i2<select.length;_i2++){select[_i2].addEventListener('change',event=>{this.removeErrorBlock(event);});}
if(this.getMobileOperatingSystem()=='IOS'||navigator.platform.toUpperCase().indexOf('MAC')>=0){document.body.classList.add('ios-device');var iosVer=this.detectBrowser()[1].split('.')[0];document.body.classList.add('ios-version'+iosVer);}}
loadGoogleCaptcha(){var _window14,_window15,_window15$customData;if((_window14=window)!==null&&_window14!==void 0&&_window14.google_catcha_loaded)return false;window.google_catcha_loaded=true;var key=((_window15=window)===null||_window15===void 0?void 0:(_window15$customData=_window15.customData)===null||_window15$customData===void 0?void 0:_window15$customData.googleCaptchaKey)||'6Le_tiopAAAAADVGcS6PSbWgLP8lmD52vDbPvSkC';var wa=document.createElement('script');wa.type='text/javascript';wa.async=true;wa.src='https://www.google.com/recaptcha/api.js?render='+key;wa.onload=()=>{window.recaptchLoaded=true;};var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(wa,s);}
fireGoogleCaptchaToken(){var action=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'submit';return new Promise((resolve,reject)=>{var _window$experiment_co9,_window$campaign_conf4,_window16;if(!((_window$experiment_co9=window.experiment_config)!==null&&_window$experiment_co9!==void 0&&_window$experiment_co9.enableGoogleRecaptcha)&&!((_window$campaign_conf4=window.campaign_config)!==null&&_window$campaign_conf4!==void 0&&_window$campaign_conf4.enableGoogleRecaptcha))return resolve();if((_window16=window)!==null&&_window16!==void 0&&_window16.google_catcha_fired)return resolve();if(window.recaptchLoaded){var _window17,_window17$customData;var timeout=setTimeout(()=>resolve(),3000);var _self=this;var key=((_window17=window)===null||_window17===void 0?void 0:(_window17$customData=_window17.customData)===null||_window17$customData===void 0?void 0:_window17$customData.googleCaptchaKey)||'6Le_tiopAAAAADVGcS6PSbWgLP8lmD52vDbPvSkC';grecaptcha.ready(function(){grecaptcha.execute(key,{action}).then(function(token){window.google_catcha_fired=true;_self.postApi(config.hostApi+'/api/survey/verify-google-catcha',{token,action}).then(()=>{resolve();clearTimeout(timeout);}).catch(()=>{clearTimeout(timeout);resolve();});});});}else{resolve();}});}
sendPostMessage(data){try{var parentWindow=this.getParentIframe();var parentDomain=this.getParentDomain(window.location.href);if(parentWindow){parentDomain="https://"+parentDomain+"/parentFrame.html";parentWindow.postMessage(data,parentDomain);return{success:true};}else{return{success:false,reason:"Parent Window Not Found"};}}catch(err){return{success:false,reason:"Error Catched: "+err.message};}}
getProfileScore(data,profileScoreExclude){var profileScoreKeys=['emailAddress','mobile','userAddress','userDOB','userFname','userLname','zipcode','gendervalue1','cityName','stateCode'];if(profileScoreKeys){profileScoreKeys=profileScoreKeys.filter(x=>!(profileScoreExclude!==null&&profileScoreExclude!==void 0&&profileScoreExclude.includes(x)));}
if(data['dobdate']&&data['dobmonth']&&data['dobyear']){data['userDOB']="".concat(data['dobyear'],"-").concat(data['dobmonth'],"-").concat(data['dobdate']);}
if(data['gender']){data['gendervalue1']=data['gender'];}
var score=0;for(var iterator of profileScoreKeys){if(data[iterator]){score++;};}
return score;}
isMinimumProfileScoreExist(data,profileScoreKeyList){var isExist=true;for(var iterator of profileScoreKeyList){if(!data[iterator]){isExist=false;};}
return isExist;}
getJobCookieData(){return new Promise((resolve,reject)=>{var _window18,_window18$customData,_window19,_window19$customData,_window20,_window20$customData,_window21,_window21$customData,_window22,_window22$customData;var eventTracker=new LEADGEN.tracker();if(this.localStorageTempData&&this.getProfileScore(this.localStorageTempData,(_window18=window)===null||_window18===void 0?void 0:(_window18$customData=_window18.customData)===null||_window18$customData===void 0?void 0:_window18$customData.profileScoreExclude)>0){eventTracker.trackCustomEvent('fetch','profile','exist',{event:'JobDataViaVariable'});return resolve(this.localStorageTempData);}
var dbPII=this.getDbPIIData();if(this.getProfileScore(dbPII,(_window19=window)===null||_window19===void 0?void 0:(_window19$customData=_window19.customData)===null||_window19$customData===void 0?void 0:_window19$customData.profileScoreExclude)>=(((_window20=window)===null||_window20===void 0?void 0:(_window20$customData=_window20.customData)===null||_window20$customData===void 0?void 0:_window20$customData.minimumProfileScore)||10)){eventTracker.trackCustomEvent('fetch','profile','db',{event:'JobDataViaDB'});this.localStorageTempData=dbPII;return resolve(dbPII);}
var localPII=this.getLocalstoragePIIData();if(this.getProfileScore(localPII,(_window21=window)===null||_window21===void 0?void 0:(_window21$customData=_window21.customData)===null||_window21$customData===void 0?void 0:_window21$customData.profileScoreExclude)>=(((_window22=window)===null||_window22===void 0?void 0:(_window22$customData=_window22.customData)===null||_window22$customData===void 0?void 0:_window22$customData.minimumProfileScore)||10)){eventTracker.trackCustomEvent('fetch','profile','local-storage',{event:'JobDataViaLocalstorage'});this.localStorageTempData=localPII;return resolve(localPII);}
try{window.userdataStatus='pending';var ifrm=document.createElement("iframe");ifrm.setAttribute("src","https://assets-nwc.cnxdserv.com/repo/deps/ilframe.html");ifrm.id='parentiframecookie';ifrm.style.width="0px";ifrm.style.height="0px";ifrm.onload=function(){document.getElementById('parentiframecookie').contentWindow.postMessage({id:'il_cd_p_event',action:'request_cookie'},'*');};ifrm.onerror=function(){reject();};document.body.appendChild(ifrm);window.isIframeLoaded=false;setTimeout(()=>{reject();},3000);eventTracker.trackCustomEvent('fetch','profile','external-load',{event:'JobExternalFrameLoaded'});window.addEventListener('message',resp=>{var _data$payload;var data=resp.data;if((data===null||data===void 0?void 0:data.action)=='dispatch_cookie'&&(data===null||data===void 0?void 0:data.id)=='il_cd_c_event'&&data!==null&&data!==void 0&&(_data$payload=data.payload)!==null&&_data$payload!==void 0&&_data$payload.cookie&&!isIframeLoaded){var _data$payload2,_userDetailsJson,_userDetailsJson2,_userDetailsJson3,_userDetailsJson4,_userDetailsJson5,_userDetailsJson6,_userDetailsJson7,_userDetailsJson8,_userDetailsJson8$pho,_userDetailsJson9,_userDetailsJson9$loc,_userDetailsJson10,_userDetailsJson10$ad,_userDetailsJson11,_userDetailsJson11$ad,_userDetailsJson12,_userDetailsJson12$ad,_userDetailsJson13,_window23,_window23$customData,_window24,_window24$customData,_window25,_window25$customData,_window26,_window26$customData,_window27,_window27$customData;window.isIframeLoaded=true;eventTracker.trackCustomEvent('fetch','profile','external-received',{event:'JobExternalDataReceived'});var name="myJobsCorner_user_details=";var ca=data===null||data===void 0?void 0:(_data$payload2=data.payload)===null||_data$payload2===void 0?void 0:_data$payload2.cookie.split('; ');var cookieData="";for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){cookieData=c.substring(name.length,c.length);}}
var userDetails=decodeURIComponent(cookieData);var userDetailsJson={};try{userDetailsJson=JSON.parse(userDetails);}catch(ex){userDetailsJson={};}
var externalLocalPII={userFname:((_userDetailsJson=userDetailsJson)===null||_userDetailsJson===void 0?void 0:_userDetailsJson.first_name)||((_userDetailsJson2=userDetailsJson)===null||_userDetailsJson2===void 0?void 0:_userDetailsJson2.firstName)||null,userLname:((_userDetailsJson3=userDetailsJson)===null||_userDetailsJson3===void 0?void 0:_userDetailsJson3.last_name)||((_userDetailsJson4=userDetailsJson)===null||_userDetailsJson4===void 0?void 0:_userDetailsJson4.lastName)||null,emailAddress:((_userDetailsJson5=userDetailsJson)===null||_userDetailsJson5===void 0?void 0:_userDetailsJson5.email)||((_userDetailsJson6=userDetailsJson)===null||_userDetailsJson6===void 0?void 0:_userDetailsJson6.emailId)||null,gendervalue1:((_userDetailsJson7=userDetailsJson)===null||_userDetailsJson7===void 0?void 0:_userDetailsJson7.gender)||null,mobile:((_userDetailsJson8=userDetailsJson)===null||_userDetailsJson8===void 0?void 0:(_userDetailsJson8$pho=_userDetailsJson8.phoneNumber)===null||_userDetailsJson8$pho===void 0?void 0:_userDetailsJson8$pho.replace(/\D/g,''))||null,zipcode:((_userDetailsJson9=userDetailsJson)===null||_userDetailsJson9===void 0?void 0:(_userDetailsJson9$loc=_userDetailsJson9.location)===null||_userDetailsJson9$loc===void 0?void 0:_userDetailsJson9$loc.zip)||null,userAddress:((_userDetailsJson10=userDetailsJson)===null||_userDetailsJson10===void 0?void 0:(_userDetailsJson10$ad=_userDetailsJson10.address)===null||_userDetailsJson10$ad===void 0?void 0:_userDetailsJson10$ad.line1)||null,stateCode:((_userDetailsJson11=userDetailsJson)===null||_userDetailsJson11===void 0?void 0:(_userDetailsJson11$ad=_userDetailsJson11.address)===null||_userDetailsJson11$ad===void 0?void 0:_userDetailsJson11$ad.state)||null,cityName:((_userDetailsJson12=userDetailsJson)===null||_userDetailsJson12===void 0?void 0:(_userDetailsJson12$ad=_userDetailsJson12.address)===null||_userDetailsJson12$ad===void 0?void 0:_userDetailsJson12$ad.city)||null};if((_userDetailsJson13=userDetailsJson)!==null&&_userDetailsJson13!==void 0&&_userDetailsJson13.dob){var dob=new Date(Date.parse(userDetailsJson.dob));if(!isNaN(dob)){var month=dob.getMonth()+1;month=month<10?'0'+month:''+month;var date=dob.getDate()<10?'0'+dob.getDate():''+dob.getDate();externalLocalPII['dobmonth']=month;externalLocalPII['dobyear']=dob.getFullYear();externalLocalPII['dobdate']=date;}}
for(var _i3 in externalLocalPII){externalLocalPII[this.getLowerString(_i3)]=externalLocalPII[_i3];}
if(this.getProfileScore(externalLocalPII,(_window23=window)===null||_window23===void 0?void 0:(_window23$customData=_window23.customData)===null||_window23$customData===void 0?void 0:_window23$customData.profileScoreExclude)>=(((_window24=window)===null||_window24===void 0?void 0:(_window24$customData=_window24.customData)===null||_window24$customData===void 0?void 0:_window24$customData.minimumProfileScore)||10)){this.localStorageTempData=externalLocalPII;eventTracker.trackCustomEvent('fetch','profile','external',{event:'JobDataViaExternalSite'});return resolve(externalLocalPII);}
var profileScore={externalLocalPII:this.getProfileScore(externalLocalPII,(_window25=window)===null||_window25===void 0?void 0:(_window25$customData=_window25.customData)===null||_window25$customData===void 0?void 0:_window25$customData.profileScoreExclude),localPII:this.getProfileScore(localPII,(_window26=window)===null||_window26===void 0?void 0:(_window26$customData=_window26.customData)===null||_window26$customData===void 0?void 0:_window26$customData.profileScoreExclude),dbPII:this.getProfileScore(dbPII,(_window27=window)===null||_window27===void 0?void 0:(_window27$customData=_window27.customData)===null||_window27$customData===void 0?void 0:_window27$customData.profileScoreExclude)};eventTracker.trackCustomEvent('fetch','profile','final-data',{event:'JobFinalDataProfileScore',profileScore});var maxProfileScore=null;var maxProfileScoreProperty=null;for(var key in profileScore){if(Object.hasOwnProperty.call(profileScore,key)){if(profileScore[key]>maxProfileScore){maxProfileScore=profileScore[key];maxProfileScoreProperty=key;}}}
switch(maxProfileScoreProperty){case 'externalLocalPII':this.localStorageTempData=externalLocalPII;eventTracker.trackCustomEvent('fetch','profile','external-partial',{event:'JobDataViaExternalSite',profileScore});return resolve(externalLocalPII);break;case 'localPII':eventTracker.trackCustomEvent('fetch','profile','local-storage-partial',{event:'JobDataViaLocalstorage',profileScore});this.localStorageTempData=localPII;return resolve(localPII);break;case 'dbPII':eventTracker.trackCustomEvent('fetch','profile','db-partial',{event:'JobDataViaDB',profileScore});this.localStorageTempData=dbPII;return resolve(dbPII);break;default:return reject();break;}}});setTimeout(()=>{document.getElementById('parentiframecookie').contentWindow.postMessage({id:'il_cd_p_event',action:'request_cookie'},'*');},1000);}catch(err){}});}
checkLocalStorageData(){var eventTracker=window.LEADGEN?new LEADGEN.tracker():null;return{setData:(k,v)=>{if(typeof v=="object"){v=JSON.stringify(v);window.leagenLocalStorage[k]=v;}else{window.leagenLocalStorage[k]=v;}
var res=this.sendPostMessage({message:'setData',key:k,value:v,secKey:window.location.host});if(!(res!==null&&res!==void 0&&res.success)){eventTracker.trackCustomEvent('err','block','postmessage-error',{event:'PostMessageError',session_id:window.session_id,reason:res===null||res===void 0?void 0:res.reason});}},getData:k=>{return window.leagenLocalStorage[k];},removeData:k=>{delete window.leagenLocalStorage[k];var res=this.sendPostMessage({message:'removeData',key:k,value:null,secKey:window.location.host});if(!(res!==null&&res!==void 0&&res.success)){eventTracker.trackCustomEvent('err','block','postmessage-error',{event:'PostMessageError',session_id:window.session_id,reason:res===null||res===void 0?void 0:res.reason});}},getAllData:()=>{var res=this.sendPostMessage({message:'getAllData',key:null,value:null,secKey:window.location.host});if(!(res!==null&&res!==void 0&&res.success)){eventTracker.trackCustomEvent('err','block','postmessage-error',{event:'PostMessageError',session_id:window.session_id,reason:res===null||res===void 0?void 0:res.reason});}}};}
pushNamiEventListner(){var _window$experiment_co10,_campaign_config;var eventTracker=window.LEADGEN?new LEADGEN.tracker():null;this.enablePushNamiOverlay=((_window$experiment_co10=window.experiment_config)===null||_window$experiment_co10===void 0?void 0:_window$experiment_co10.enablePushNamiOverlay)||false;if((_campaign_config=campaign_config)!==null&&_campaign_config!==void 0&&_campaign_config.enablePushNami&&this.enablePushNamiOverlay){document.body.addEventListener('overlayShownComplete',()=>{window.pushnamiComplete=true;},{once:true});}
document.body.addEventListener('pushnami-events',data=>{window.pushStatus=data===null||data===void 0?void 0:data.detail.event;var pushTriggerEvents=['permissions-prompt-action-deny','permissions-prompt-blocked','permissions-action-subscribed','permissions-blocked-ignored'];if(pushTriggerEvents.includes(window.pushStatus)&&!this.pushOverlayCollapsed){if(document.querySelector('#pushoverlay'))document.querySelector('#pushoverlay').style.display='none';this.pushOverlayCollapsed=true;eventTracker.trackCustomEvent('com','block','pushoverlayprompt',{event:'pushOverlayPromptCollapsed',pushstatus:window.pushStatus});var overlayShown=new CustomEvent('overlayShownComplete');document.body.dispatchEvent(overlayShown);}else if(window.pushStatus=='permissions-prompt-prompt'&&this.enablePushNamiOverlay){this.checkAndExecutePushNami(()=>{var overlayShown=new CustomEvent('overlayShownComplete');document.body.dispatchEvent(overlayShown);});}else if(window.pushStatus=='permissions-not-compatible'){var _overlayShown=new CustomEvent('overlayShownComplete');document.body.dispatchEvent(_overlayShown);}});}
checkAndExecutePushNami(cb){if(!this.isIOS()){try{var _eventTracker5=window.LEADGEN?new LEADGEN.tracker():null;var browser=this.detectBrowser();var platform=navigator.platform.toLowerCase();var device=this.getMobileOperatingSystem()!='unknown'?this.getMobileOperatingSystem().toLowerCase():platform;var pushOverlayDiv=document.querySelector('#pushoverlay');if(pushOverlayDiv){var userAgent=navigator.userAgent;if(/SamsungBrowser/i.test(userAgent)){pushOverlayDiv.classList.add('samsungbrowser');}else if(userAgent.indexOf(" GSA/")!==-1){pushOverlayDiv.classList.add('gsabrowser');}
pushOverlayDiv.classList.add(browser[0].toLowerCase(),device);}
var expr=window.pushStatus;console.log(expr);switch(expr){case 'permissions-prompt-prompt':if(pushOverlayDiv)pushOverlayDiv.style.display='block';_eventTracker5.trackCustomEvent('imp','block','pushoverlayprompt',{event:'pushOverlayPromptShown',pushstatus:window.pushStatus});setTimeout(()=>{if(typeof cb==='function'){if(pushOverlayDiv)pushOverlayDiv.style.display='none';cb();}else{if(pushOverlayDiv)pushOverlayDiv.style.display='none';_eventTracker5.trackCustomEvent('com','block','pushoverlayprompt',{event:'pushOverlayPromptCollapsed',pushstatus:window.pushStatus,'autocollapse':true});};},5000);break;case 'permissions-prompt-action-deny':case 'permissions-prompt-blocked':case 'permissions-action-subscribed':case 'permissions-blocked-ignored':console.log(window.pushStatus);break;default:_eventTracker5.trackCustomEvent('imp','section','pushoverlayprompt',{event:'pushOverlayPromptAutoRedirected',pushstatus:window.pushStatus});}}catch(err){eventTracker.trackCustomEvent('err','block','pushoverlayprompt',{event:'pushOverlayPromptError',error:err,pushstatus:window.pushStatus});}
if(window.pushStatus!='permissions-prompt-prompt'&&typeof cb==='function')cb();}else{if(typeof cb==='function')cb();}}
bytesToBase64(bytes){var binString=Array.from(bytes,x=>String.fromCodePoint(x)).join("");return btoa(binString);}
getEncodedEmailPhoneHash(){var userObj={};var mobileLValue=localStorage.getItem('survey-prefix-mobile');var emailValue=localStorage.getItem('survey-prefix-emailAddress');if(mobileLValue){userObj.phone_hash=convertStringToMD5(mobileLValue);}
if(emailValue){userObj.email_hash=convertStringToMD5(emailValue);}
var encoded_obj=encodeURIComponent(this.bytesToBase64(new TextEncoder().encode(JSON.stringify(userObj))));return encoded_obj;}
parentListner(callback){if(!window.setIframe){window.setIframe=true;var frame=this.createIframe();frame.onload=function(){if(typeof callback==='function'){try{callback();}catch(e){}}
var app=new App();app.checkLocalStorageData().getAllData();};window.addEventListener("message",event=>{if(event.data.secKey!=window.location.host){return;}
if('data'in event&&event.data!=null){window.leagenLocalStorage=event.data;}
this.updateCurrentLocalStorage();});}else{return;}}
createIframe(){var parentDomain=this.getParentDomain(window.location.href);parentDomain="https://"+parentDomain+"/parentFrame.html";var frame=document.createElement('iframe');frame.style.display='none';frame.style.width="0px";frame.style.height="0px";frame.setAttribute("src",parentDomain);frame.setAttribute("id","parentIframe");document.body.appendChild(frame);return frame;}
getParentIframe(){var parenFrame=document.getElementById('parentIframe');var parentWindow=parenFrame.contentWindow;return parentWindow;}
getParentDomain(url){var urlParts=new URL(url).hostname.split('.');return urlParts.slice(0).slice(-(urlParts.length===4?3:2)).join('.');}
updateCurrentLocalStorage(){var prefix="survey-prefix-";var filteredKeys=Object.keys(window.leagenLocalStorage).filter(key=>key.startsWith(prefix));for(var key in filteredKeys){localStorage.setItem(filteredKeys[key],window.leagenLocalStorage[filteredKeys[key]]);}}
fireImagePixel(url){try{var i=new Image();i.src=url;var frame=document.createElement('iframe');frame.style.display='none';document.body.appendChild(frame);frame.contentDocument.body.appendChild(i);}catch(err){console.log("Coun't Fire pixel ",url);}}
detectBrowser(){var N=navigator.appName,ua=navigator.userAgent,tem;var M=ua.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);if(M&&(tem=ua.match(/version\/([\.\d]+)/i))!=null){M[2]=tem[1];}
M=M?[M[1],M[2]]:[N,navigator.appVersion,'-?'];return M;}
isIOS(){var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return this.getMobileOperatingSystem()==='IOS'||isSafari;}
setCookies(name,value,days){var d=new Date();d.setTime(d.getTime()+24*60*60*1000*days);document.cookie=name+'='+value+';path=/;expires='+d.toGMTString();}
deleteCookie(name){document.cookie=name+'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';}
getCookie(name){var v=document.cookie.match('(^|;) ?'+name+'=([^;]*)(;|$)');return v?v[2]:null;}
getParam(url,parm){var urlLink=new URL(url);var query_string=urlLink.search;var search_params=new URLSearchParams(query_string);var paramValue=search_params.get(parm);return paramValue;}
getUrlSearchParams(url){var urlLink=new URL(url);var search_params=new URLSearchParams(urlLink.search);var data=[];search_params.forEach((val,key)=>{data[key]=val;data[this.getLowerString(key)]=val;});return{values:()=>{return data;},get:val=>{return data[val]||null;},has:val=>{return data[val]?true:false;},getPii:key=>{var resp=null;var pii=PIIMapping;for(var i in pii){var _customData,_customData2;pii[this.getLowerString(i)]=pii[i];if(pii[i]==key&&(_customData=customData)!==null&&_customData!==void 0&&_customData.user_profile&&(_customData2=customData)!==null&&_customData2!==void 0&&_customData2.user_profile[i]){var _customData3;return(_customData3=customData)===null||_customData3===void 0?void 0:_customData3.user_profile[i];}
if(pii[i]==key&&data[i]){return this.removeMacrosFromString(data[i]);}}
return null;}};}
getLowerString(string){return string.toLowerCase().trim();}
fetchParams(){if(!window.isAppFetchParamsCalled){window.isAppFetchParamsCalled=true;document.querySelectorAll('input, select').forEach(i=>{var value=this.removeMacrosFromString(this.getParam(document.URL,i.name));if(value){i.value=value;}});}}
getApi(url){var _arguments2=arguments,_this3=this;return _asyncToGenerator(function*(){var header=_arguments2.length>1&&_arguments2[1]!==undefined?_arguments2[1]:{};var base64code=window.globalAccessToken||localStorage.getItem('base64code')||null;if(base64code){header.authorization=base64code;}
var result=yield fetch(url,{headers:_objectSpread({Accept:'application/json','Content-Type':'application/json','X-LEAD-COOKIE':_this3.getCookie('usercookie'),'X-LEAD-GLOBAL':_this3.getCookie('leadglobal'),'X-LEAD-UID':_this3.getCookie('leadgen_session')},header),cache:'no-cache',method:'GET'});return result.json();})();}
postApi(url){var _arguments3=arguments,_this4=this;return _asyncToGenerator(function*(){var payload=_arguments3.length>1&&_arguments3[1]!==undefined?_arguments3[1]:{};var header=_arguments3.length>2&&_arguments3[2]!==undefined?_arguments3[2]:{};return new Promise((resolve,reject)=>{payload['userCookieId']=_this4.getCookie('userCookieId');payload['visitorId']=_this4.getCookie('visitorId');var base64code=window.globalAccessToken||localStorage.getItem('base64code')||null;if(base64code){header.authorization=base64code;}
fetch(url,{headers:_objectSpread({Accept:'application/json','Content-Type':'application/json','X-VERLUC':_this4.getCookie('usercookie'),'X-VERGL':_this4.getCookie('leadglobal'),'X-VERLS':_this4.getCookie('leadgen_session')},header),cache:'no-cache',method:'POST',body:JSON.stringify(payload)}).then(x=>{if(x.status<300){x.json().then(x=>{return resolve(x);}).catch(x=>{return reject('ERROR');});}else{x.json().then(x=>{if(x.redirect&&x.type=='redirect'){var _window$experiment_co11,_x$redirect;if((_window$experiment_co11=window.experiment_config)!==null&&_window$experiment_co11!==void 0&&_window$experiment_co11.jobs403RedirectToSerpFlag&&(_x$redirect=x.redirect)!==null&&_x$redirect!==void 0&&_x$redirect.includes("/403.html")){var is403Redirect=true;return _this4.redirectToJobFullfillment(is403Redirect);}
window.location.href=x.redirect;return;}
return reject(x);}).catch(x=>{return reject(x);});}}).catch(x=>{console.log(x);if(x.redirect&&x.type=='redirect'){window.location.href=x.redirect;return;}
return reject(x);});});})();}
getFlowParam(){var base64Code=this.getParam(document.URL,'flow')||localStorage.getItem('base64code')||null;if(window.globalAccessToken){base64Code=window.globalAccessToken;}
if(base64Code){var valueList=base64Code.split('.');localStorage.setItem('base64code',base64Code);var param=JSON.parse(window.atob(valueList[1]));param.base64Code=base64Code;this.eventApi=param.eventApi;this.maxEventTrackId=param.maxTrackingId;if(param.uid==window.session_id){return param;}
return{};}
return{};}
postEvents(eventName,data){}
postMaxEvents(eventName){if(this.maxEventTrackId){var img=new Image();img.src="https://c.mxtrd.com/v2/acvr?akey=".concat(this.maxEventTrackId,"&noscript=1&ord=0&event=").concat(eventName);}}
getPIIMapping(){var pii=PIIMapping;for(var i in pii){pii[this.getLowerString(i)]=pii[i];}
for(var piiElement of['emailAddress','gender','mobile','userAddress','userDOB','userFname','userLname','zipcode','gendervalue1','cityName','stateCode','dobdate','dobmonth','dobyear']){var _customData4,_customData5;if((_customData4=customData)!==null&&_customData4!==void 0&&_customData4.user_profile&&(_customData5=customData)!==null&&_customData5!==void 0&&_customData5.user_profile[piiElement]){var _customData6;pii[piiElement]=(_customData6=customData)===null||_customData6===void 0?void 0:_customData6.user_profile[piiElement];}}
return pii;}
getDbPIIData(){var pii={};for(var piiElement of['emailAddress','gender','mobile','userAddress','userDOB','userFname','userLname','zipcode','gendervalue1','cityName','stateCode','dobdate','dobmonth','dobyear']){var _customData7,_customData8;if((_customData7=customData)!==null&&_customData7!==void 0&&_customData7.user_profile&&(_customData8=customData)!==null&&_customData8!==void 0&&_customData8.user_profile[piiElement]){var _customData9;pii[piiElement]=(_customData9=customData)===null||_customData9===void 0?void 0:_customData9.user_profile[piiElement];}}
return pii;}
getLocalstoragePIIData(){var pii={userFname:localStorage.getItem('survey-prefix-userFname')||null,userLname:localStorage.getItem('survey-prefix-userLname')||null,emailAddress:localStorage.getItem('survey-prefix-emailAddress')||null,userAddress:localStorage.getItem('survey-prefix-userAddress')||null,mobile:localStorage.getItem('survey-prefix-mobile')||null,cityName:localStorage.getItem('survey-prefix-cityName')||null,stateCode:localStorage.getItem('survey-prefix-stateCode')||null,zipcode:localStorage.getItem('survey-prefix-zipcode')||null,gendervalue1:localStorage.getItem('survey-prefix-gendervalue1')||null,dobmonth:localStorage.getItem('survey-prefix-dobmonth')||null,dobdate:localStorage.getItem('survey-prefix-dobdate')||null,dobyear:localStorage.getItem('survey-prefix-dobyear')||null};for(var i in pii){pii[this.getLowerString(i)]=pii[i];}
for(var piiElement of['emailAddress','gender','mobile','userAddress','userDOB','userFname','userLname','zipcode','gendervalue1','cityName','stateCode','dobdate','dobmonth','dobyear']){var _customData10,_customData11;if((_customData10=customData)!==null&&_customData10!==void 0&&_customData10.user_profile&&(_customData11=customData)!==null&&_customData11!==void 0&&_customData11.user_profile[piiElement]){var _customData12;pii[piiElement]=(_customData12=customData)===null||_customData12===void 0?void 0:_customData12.user_profile[piiElement];}}
return pii;}
getZipCodeAddress(zipCode){return this.postApi(config.hostApi+'/api/app/address-by-zip',{zipCode});}
isElementExists(id){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'id';var ele;if(type==='id'){ele=document.getElementById(id)||null;}else if(type==='inputname'){var e=document.getElementsByName(id)||null;if(e){ele=e[0]||null;}}else if(type==='name'){ele=document.getElementsByName(id).length||null;}else if(type==='tag'){ele=document.getElementsByTagName(id).length||null;}else if(type==='class'){ele=document.getElementsByClassName(id).length||null;}
return!!ele;}
element(id){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'id';var getFirst=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var ele=null;if(type==='id'){ele=document.getElementById(id)||null;}else if(type==='name'){ele=document.getElementsByName(id)||null;}else if(type==='inputname'){var e=document.getElementsByName(id)||null;if(e){ele=e[0]||null;}}else if(type==='tag'){ele=document.getElementsByTagName(id)||null;}else if(type==='class'){ele=document.getElementsByClassName(id)||null;}
if(!ele){ele=document.createElement('span');}
if(getFirst){var _ele,_ele2;if(((_ele=ele)===null||_ele===void 0?void 0:_ele.length)==0)ele=null;else ele=((_ele2=ele)===null||_ele2===void 0?void 0:_ele2.length)>0?ele[0]:ele;}
return{all:()=>ele,exist:()=>{var _ele3;return!!(((_ele3=ele)===null||_ele3===void 0?void 0:_ele3.length)>0?true:ele);},display:val=>ele.style.display=val,width:val=>ele.style.width=val,minwidth:val=>ele.style['min-width']=val,height:val=>ele.style.height=val,minheight:val=>ele.style['min-height']=val,color:val=>ele.style.color=val,disabled:val=>ele.disabled=val,style:(key,val)=>ele.style[key]=val,hide:()=>{if(ele)ele.style.display='none';},hidden:()=>ele.style.overflow='hidden',autoset:()=>ele.style.overflow='unset',focus:()=>ele.focus(),visible:data=>ele.style.visibility=data?'visible':'hidden',show:function show(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'block';if(ele)ele.style.display=data;},showInline:()=>ele.style.display='inline-block',html:_html=>{if(_html!==undefined&&_html!==null){return ele.innerHTML=_html;}else{return ele.innerHTML;}},value:val=>{if(val!==undefined&&val!==null){return ele.value=val;}else{return ele.value;}},getAttribute:att=>{return ele.getAttribute(att);},appendOption:(text,value)=>{var opt=document.createElement('option');opt.appendChild(document.createTextNode(text));opt.value=value;ele.appendChild(opt);}};}
loadFromLocalStorage(){document.querySelectorAll('input, select').forEach(ele=>{var data=localStorage.getItem('survey-prefix-'+ele.name);var ignore=0;if(ele.name=='gender'&&ele.localName=='select'){data=localStorage.getItem('survey-prefix-'+ele.name)||localStorage.getItem('survey-prefix-gendervalue1');}
if(ele.name=='gender'&&data!=null&&data!='')ele.style.color='#001122';if(ele.name=='dobdate'&&data!=null)ele.style.color='#001122';if(ele.name=='dobmonth'&&data!=null)ele.style.color='#001122';if(ele.name=='dobyear'&&data!=null)ele.style.color='#001122';if(ele.name=='stateCode'&&data!=null)ele.style.color='#001122';if(ele.id==='fullDate'&&ele.name==='userDOB'){var year=localStorage.getItem('survey-prefix-dobyear');var month=localStorage.getItem('survey-prefix-dobmonth');var day=localStorage.getItem('survey-prefix-dobdate');if(year&&month&&day){var date="".concat(year,"-").concat(month,"-").concat(day);var dateObj=new Date(date);if(dateObj instanceof Date&&!isNaN(dateObj)){var dateString=new Date(date).toISOString();if(dateString.search(date)>-1&&/\d{4}-\d{2}-\d{2}/.test(date)){ele.value=date;ele.style.color='#001122';}}else{console.log('Invalid dob date format in storage');}}}
if(data){if(ele.name=='gender'){if(["male","female"].includes(ele.value.toLowerCase())){ele.value=data;}
if(ele.name=='gender'&&ele.localName=='select'){var genderLowerCase=data.toLowerCase();if(genderLowerCase==='m'||genderLowerCase==='f'){data=genderLowerCase==='m'?'male':'female';}
ele.value=data.toLowerCase();;}}else if(ele.name=='gendervalue1'){ele.value=ele.value||'';var _genderLowerCase=data.toLowerCase();if(_genderLowerCase==='m'||_genderLowerCase==='f'){data=_genderLowerCase==='m'?'male':'female';}
if(ele.value.toLowerCase()==data.toLowerCase()){ele.click();}}else{ele.value=data;try{if(ele.name=='zipcode'&&this.isElementExists('zipcode')&&(!localStorage.getItem('survey-prefix-stateName')||!localStorage.getItem('survey-prefix-cityName'))&&!window.zipcodePreloaded){window.zipcodePreloaded=true;this.getZipCodeAddress(data).then(resp=>{for(var zipkey in resp){localStorage.setItem('survey-prefix-'+zipkey,resp[zipkey]);if(window.setIframe&&window.customData.isSubdomain){this.checkLocalStorageData().setData('survey-prefix-'+zipkey,resp[zipkey]);}}});}}catch(e){}}}else{var _window$experiment_co12,_window$customData,_window$customData2,_window$customData3;if(ele.name=='zipcode'&&(_window$experiment_co12=window.experiment_config)!==null&&_window$experiment_co12!==void 0&&_window$experiment_co12.enableIpAddressDetails&&(_window$customData=window.customData)!==null&&_window$customData!==void 0&&_window$customData.ipAddressDetails&&(_window$customData2=window.customData)!==null&&_window$customData2!==void 0&&_window$customData2.ipAddressDetails['zip-code']&&((_window$customData3=window.customData)===null||_window$customData3===void 0?void 0:_window$customData3.ipAddressDetails['zip-code'])>0){ele.value=window.customData.ipAddressDetails['zip-code'];}}
if((ele.name=='dobdate'||ele.name=='dobmonth'||ele.name=='dobyear')&&ele.selectedIndex===-1){if(window.experiment_config&&window.experiment_config.surveyOnPII){return;}
ele.value='';localStorage.removeItem('survey-prefix-'+ele.name);if(window.setIframe&&window.customData.isSubdomain){this.checkLocalStorageData().removeData('survey-prefix-'+ele.name);}}});}
getDateTime(){var date=new Date();var dateStr=date.getFullYear()+'-'+('00'+(date.getMonth()+1)).slice(-2)+'-'+('00'+date.getDate()).slice(-2)+' '+('00'+date.getHours()).slice(-2)+':'+('00'+date.getMinutes()).slice(-2)+':'+('00'+date.getSeconds()).slice(-2);return dateStr;}
getOptinParam(base64Code){if(window.globalAccessToken){base64Code=window.globalAccessToken;}
if(base64Code){var valueList=base64Code.split('.');localStorage.setItem('base64code',base64Code);var param=JSON.parse(window.atob(valueList[1]));param.base64Code=base64Code;this.eventApi=param.eventApi;this.maxEventTrackId=param.maxTrackingId;return param;}
return{};}
checkParams(){var base64Code=this.getParam(document.URL,'flow')||null;if(base64Code===null){window.location.href='/lander.html';}
return;}
getTestStatus(){if(config){if(config.isTest&&document.getElementsByClassName('fspu-debug').length===0){var test=document.createElement('div');var dot=document.createElement('img');dot.src='../images/dot@2x.png';dot.width='50';dot.height='20';test.className='fspu-debug';test.style.position='fixed';test.style.top='0';test.style.right='-100px';test.style.padding="10px";test.style.zIndex="10000";test.style.pointerEvents='none';test.style.transition='right 0.6s cubic-bezier(0.25, 1, 0.5, 1)';test.appendChild(dot);document.body.appendChild(test);setTimeout(()=>{test.style.right='0';},10);}}else{setTimeout(()=>{getTestStatus();},100);}}
getScrollXY(){var scrOfX=0,scrOfY=0;if(typeof window.pageYOffset=='number'){scrOfY=window.pageYOffset;scrOfX=window.pageXOffset;}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){scrOfY=document.body.scrollTop;scrOfX=document.body.scrollLeft;}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){scrOfY=document.documentElement.scrollTop;scrOfX=document.documentElement.scrollLeft;}
return[scrOfX,scrOfY];}
getDocHeight(){var D=document;return Math.max(D.body.scrollHeight,D.documentElement.scrollHeight,D.body.offsetHeight,D.documentElement.offsetHeight,D.body.clientHeight,D.documentElement.clientHeight);}
addBingTracking(ti){(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function f(){var o={ti:ti};o.q=w[u],w[u]=new UET(o),w[u].push('pageLoad');},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=='loaded'&&s!=='complete'||(f(),n.onload=n.onreadystatechange=null);},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i);})(window,document,'script','//bat.bing.com/bat.js','uetq');}
addGoogleTracking(ti){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer',ti);var data={"os":this.getMobileOperatingSystem()};if(data){window.dataLayer=window.dataLayer||[];dataLayer.push(data);this.enableGoogleOptimiser();}}
getMobileOperatingSystem(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/windows phone/i.test(userAgent)){return "Windows Phone";}
if(/android/i.test(userAgent)){return "Android";}
if(/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream){return "IOS";}
return "unknown";}
getFormElement(event){var form=event.target.elements;var data={};for(var a in form){var element=form[a];if(element.type=='checkbox'){data[element.name]=element.checked?'on':null;}else{data[element.name]=element.value;}}
return data;}
fireClientSidePixel(pixelData,index){var _this5=this;return _asyncToGenerator(function*(){var eventTracker=new LEADGEN.tracker();try{if(localStorage.getItem('isAnuraSpam')=='true'){_this5.firePostbackPixelStatusEvent(_objectSpread(_objectSpread({},pixelData),{},{pixelUrl:'',error:'spam marked by anura'}),'ERROR');return;}
var data=yield _this5.getApi(config.hostApi+'/api/survey/check-scrub',{});if(typeof data.response!=='undefined'&&!data.response.scrub&&!data.response.duplicate){if(typeof pixelData.url!=='undefined'&&typeof pixelData.mandatoryFields!=='undefined'){var queryParams=new URL(localStorage.getItem('landingUrl')).searchParams;var macroReplaceParams=['t1','t2','t3','t4','t5','t6','t7','t8','t9','t10','transaction_id','cid','session_id'];var localMacroData={session_id:window.session_id};var mandatoryFields=pixelData.mandatoryFields;for(var i=0;i<mandatoryFields.length;i++){var mandatoryFieldPresentInRequestData=window.requestData&&window.requestData[mandatoryFields[i]]||localMacroData[mandatoryFields[i]];if(queryParams.get(mandatoryFields[i])==null&&!mandatoryFieldPresentInRequestData){console.log("mandatory fields missing in partner pixel");_this5.firePostbackPixelStatusEvent(_objectSpread(_objectSpread({},pixelData),{},{pixelUrl:'',error:'mandatory fields missing in partner pixel'}),'ERROR');return;}}
var pixelUrl=pixelData.url;macroReplaceParams.forEach(element=>{var param=queryParams.get(element);if(!param&&window.requestData&&window.requestData[element]){param=window.requestData[element];}else if(localMacroData[element]){param=localMacroData[element];}
pixelUrl=pixelUrl.replace('{'+element+'}',param?param:'');});console.log("postback pixel url: "+pixelUrl);var image=new Image(1,1);image.onload=function(){var _ref=_asyncToGenerator(function*(ev){yield _this5.firePostbackPixelStatusEvent(_objectSpread(_objectSpread({},pixelData),{},{pixelUrl}),'OK');});return function(_x){return _ref.apply(this,arguments);};}();image.onerror=function(){var _ref2=_asyncToGenerator(function*(ev){yield _this5.firePostbackPixelStatusEvent(_objectSpread(_objectSpread({},pixelData),{},{pixelUrl,error:ev}),'ERROR');});return function(_x2){return _ref2.apply(this,arguments);};}();image.src=pixelUrl;}else if(pixelData.useDynamicScript){var executorFunctionName='executeDynamicScript_'+index;if(typeof window[executorFunctionName]==='function'){try{yield window[executorFunctionName]();yield _this5.firePostbackPixelStatusEvent(_objectSpread(_objectSpread({},pixelData),{},{pixelUrl:''}),'OK');}catch(e){yield _this5.firePostbackPixelStatusEvent(_objectSpread(_objectSpread({},pixelData),{},{pixelUrl:''}),'ERROR');}}}}}catch(e){console.error("Error in firing client side postback pixel: "+e);}})();}
firePostbackPixelStatusEvent(pixelData,status){return _asyncToGenerator(function*(){if(pixelData){var _eventTracker6=new LEADGEN.tracker();var evt=status==='ERROR'?'PartnerPixelFailed':'PartnerPixelFired';var params={event:evt,pixelUrl:pixelData.pixelUrl,data:status,firedOnEvent:pixelData.eventDetails&&pixelData.eventDetails.name?pixelData.eventDetails.name:''};if(status&&status==='ERROR')params.error=pixelData.error;yield _eventTracker6.trackCustomEventPromise('pixel',pixelData.affiliate,'partnerPixel',params);}})();}
fireServerSidePixel(index){var _this6=this;return _asyncToGenerator(function*(){try{yield _this6.postApi(config.hostApi+'/event/partner-pixel',{index});}catch(e){console.log("Error in firing server side postback pixel: "+e);}})();}
getTracking(){var _this7=this;return _asyncToGenerator(function*(){if(typeof tracking!=='undefined'&&tracking){tracking.forEach(data=>{if(data.id=='GTM'){if(data.pages&&data.pages.length>0){var userDevice=_this7.getMobileOperatingSystem();if(data.pages.includes(flowData.flow_page_slug)&&data.filter.OS.includes(userDevice)&&window.gtmPixelFiredPage!==flowData.flow_page_slug){window.gtmPixelFiredPage=flowData.flow_page_slug;_this7.addGoogleTracking(data.values);}}}else if(data.id=='Bing'){if(data.pages&&data.pages.length>0){var _userDevice=_this7.getMobileOperatingSystem();if(data.pages.includes(flowData.flow_page_slug)&&data.filter.OS.includes(_userDevice)){_this7.addBingTracking(data.values);}}}else{console.log("no config present");}});}
if(flowData&&flowData.flow_page_slug!=='lander'){_this7.checkAndFirePartnerPixel();}})();}
checkAndFirePartnerPixel(postEmailSubmit,eventData){var _this8=this;return _asyncToGenerator(function*(){if(typeof postbackPixelData!=='undefined'&&postbackPixelData){if(postbackPixelData.length==0){return;}
for(var i=0;i<postbackPixelData.length;i++){var _pixelObj$eventDetail;var pixelObj=postbackPixelData[i];if(window.isSpa||(_pixelObj$eventDetail=pixelObj.eventDetails)!==null&&_pixelObj$eventDetail!==void 0&&_pixelObj$eventDetail.allowDuplicateEvents||!window.pixelFiredData.includes(JSON.stringify(pixelObj))){var isExpressSlugSkip=postEmailSubmit&&["register-step1","register-step2","register-step3","lander"].includes(pixelObj.page);if(isExpressSlugSkip||pixelObj.page==='*'||flowData.flow_page_slug==pixelObj.page){if(pixelObj.eventDetails&&window.doesEventMatch(pixelObj.eventDetails.key,eventData)){yield _this8.firePixelByType(pixelObj,i,isExpressSlugSkip,null);}else if(!pixelObj.eventDetails){yield _this8.firePixelByType(pixelObj,i,isExpressSlugSkip,null);}}}}}else if(postEmailSubmit){yield _this8.fireDefaultHOConversionPixel();}})();}
firePixelByType(pixel,index,isExpressSlugSkip,onBlockEvent){var _this9=this;return _asyncToGenerator(function*(){try{switch(pixel.pixelSource){case "client":{if(pixel.blockId&&!onBlockEvent){break;}
window.pixelFiredData.push(JSON.stringify(pixel));yield _this9.fireClientSidePixel(pixel,index);break;}
case "server":{if(pixel.blockId&&!onBlockEvent){break;}
window.pixelFiredData.push(JSON.stringify(pixel));yield _this9.fireServerSidePixel(index);break;}}}catch(e){console.log('error in firePixelByType: ',e);}})();}
fireCustomPixel(blockId){var _this10=this;return _asyncToGenerator(function*(){if(typeof postbackPixelData!=='undefined'&&postbackPixelData){if(postbackPixelData.length==0){return;}
var customPixel=postbackPixelData.filter(pixel=>pixel.blockId&&pixel.blockId==blockId);if(customPixel.length>0){customPixel.forEach(function(){var _ref3=_asyncToGenerator(function*(cpixel,index){if(!window.pixelFiredData.includes(JSON.stringify(cpixel))){yield _this10.firePixelByType(cpixel,index,null,true);}});return function(_x3,_x4){return _ref3.apply(this,arguments);};}());}}})();}
fireDefaultHOConversionPixel(){var _this11=this;return _asyncToGenerator(function*(){var default_ho_conv_url=config.hostApi+'/event/partner-conversion';var transactionId=localStorage.getItem("survey-prefix-transaction_id");var eventTracker=new LEADGEN.tracker();if(transactionId&&!window.pixelFiredData.includes(default_ho_conv_url)){try{var data=yield _this11.postApi(default_ho_conv_url,{transactionId});if(data&&data.success){console.log("HO conversion Pixel Fire Complete");eventTracker.trackCustomEvent('com','section','PartnerConversionPixelFallback',{event:'PartnerConversionPixelFallback',cid:campaign_config.campaign_id,sessionid:session_id});}else{console.log('error in firing HO conversion pixel');}}catch(e){console.log('error in firing HO conversion pixel: ',e);}}else{console.log('No Transaction id in url');}})();}
handleProfanityCheck(event,element){if(event)event.stopPropagation();var enteredValue=event?event.target.value:element===null||element===void 0?void 0:element.value;console.log(enteredValue);if(window.blackList){var blacklistedResponse=window.blackList.validate_data(enteredValue);var blacklistedwords=blacklistedResponse.blacklisted_words?blacklistedResponse.blacklisted_words.filter((item,pos)=>blacklistedResponse.blacklisted_words.indexOf(item)==pos).join(','):'';var _eventTracker7=new LEADGEN.tracker();var url=new URL(window.location.href);var campaignid=url.searchParams.get("cid");if(typeof campaign_data!=='undefined'){campaignid=campaign_data.campaignId;}
if(blacklistedResponse.success!=1&&_eventTracker7){_eventTracker7.trackCustomEvent('imp','block','profanity',{event:'ProfanityDetected',elementType:event?event.target.name:element===null||element===void 0?void 0:element.name,string:enteredValue,substring:blacklistedwords,cid:campaignid,wordType:blacklistedResponse.type,domain:window.location.hostname});}}}
getVisitedButEmptyInputFields(){return this.visitedButEmptyInputFields;}
redirectUserToLanderOnProfanity(event){var customElArr=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var eventTracker=new LEADGEN.tracker();var elements=event?event.target.elements:customElArr;var enteredValues=[];for(var e=0;e<elements.length;e++){if(elements[e].name.length&&elements[e].value&&elements[e].type!='hidden'){enteredValues.push({value:elements[e].value,name:elements[e].name});}}
var blackListedWords=[];enteredValues.filter(v=>v.value!="").forEach(entity=>{var blacklistedResponse=window.blackList.validate_data(entity.value);if(blacklistedResponse.success!=1){blackListedWords.push({elementType:entity.name,string:entity.value,wordType:blacklistedResponse.type,substring:blacklistedResponse.blacklisted_words?blacklistedResponse.blacklisted_words.join(','):''});}});if(blackListedWords.length){eventTracker.trackCustomEvent('button','click','profanity',{event:'ProfanityUserRedirected',data:blackListedWords,cid:window.campaign_config&&window.campaign_config.campaign_id?window.campaign_config.campaign_id:'',domain:window.location.hostname});setTimeout(()=>{var md5Script=document.createElement('script');md5Script.src="/js/md5-converter.js";md5Script.defer=true;document.body.appendChild(md5Script);var self=this;md5Script.onload=function(){window.location=location.origin+'/403.html?v='+self.getEncodedEmailPhoneHash();};},0);return true;}}
getFallbackOfferUrls(){var domainName=this.getDomainName();var fallbackOfferUrls={primerewardspot:{offeruid:'be4d5932-90be-40d0-b4be-de2d0f89d489',clickUrl:'https://imtrk.go2cloud.org/aff_i?offer_id=420&aff_id=1&file_id=504&aff_sub='+campaign_data.campaignId,linkoutUrl:'https://topsurveyspot.com/api/redirect/hasoffer?offeruid=be4d5932-90be-40d0-b4be-de2d0f89d489&offer_id=420&aff_id=1&file_id=504&aff_sub='+campaign_data.campaignId+'&userAddress={{userAddress}}&cityName={{cityName}}&emailAddress={{emailAddress}}&userFname={{userFname}}&userLname={{userLname}}&dobmonth={{dobmonth}}&dobdate={{dobdate}}&dobyear={{dobyear}}&gendervalue1={{gendervalue1}}&stateCode={{stateCode}}&zipcode={{zipcode}}&mobile={{mobile}}&aff_sub3='+session_id},topsurveyspot:{offeruid:'be4d5932-90be-40d0-b4be-de2d0f89d489',clickUrl:'https://imtrk.go2cloud.org/aff_i?offer_id=420&aff_id=1&file_id=504&aff_sub='+campaign_data.campaignId,linkoutUrl:'https://topsurveyspot.com/api/redirect/hasoffer?offeruid=be4d5932-90be-40d0-b4be-de2d0f89d489&offer_id=420&aff_id=1&file_id=504&aff_sub='+campaign_data.campaignId+'&userAddress={{userAddress}}&cityName={{cityName}}&emailAddress={{emailAddress}}&userFname={{userFname}}&userLname={{userLname}}&dobmonth={{dobmonth}}&dobdate={{dobdate}}&dobyear={{dobyear}}&gendervalue1={{gendervalue1}}&stateCode={{stateCode}}&zipcode={{zipcode}}&mobile={{mobile}}&aff_sub3='+session_id},theamericansweepstakes:{offeruid:'2cf03c2c-40d9-4f00-bb1b-183bbcb619cd',clickUrl:'https://imtrk.go2cloud.org/aff_c?offer_id=1140&aff_id=1&file_id=3164&aff_sub='+campaign_data.campaignId,linkoutUrl:'https://theamericansweepstakes.com/api/redirect/hasoffer?offeruid=2cf03c2c-40d9-4f00-bb1b-183bbcb619cd&offer_id=1140&aff_id=1&file_id=3164&aff_sub='+campaign_data.campaignId+'&userAddress={{userAddress}}&cityName={{cityName}}&emailAddress={{emailAddress}}&userFname={{userFname}}&userLname={{userLname}}&dobmonth={{dobmonth}}&dobdate={{dobdate}}&dobyear={{dobyear}}&gendervalue1={{gendervalue1}}&stateCode={{stateCode}}&zipcode={{zipcode}}&mobile={{mobile}}&aff_sub3='+session_id},freesamplesprousa:{offeruid:'0c6f2727-1ba5-4e7b-bf0c-99eee7a58e93',clickUrl:'https://imtrk.go2cloud.org/aff_i?offer_id=237&aff_id=1&file_id=315&aff_sub='+campaign_data.campaignId,linkoutUrl:'https://freesamplesprousa.com/api/redirect/hasoffer?offeruid=0c6f2727-1ba5-4e7b-bf0c-99eee7a58e93&offer_id=237&aff_id=1&file_id=315&aff_sub='+campaign_data.campaignId+'&userAddress={{userAddress}}&cityName={{cityName}}&emailAddress={{emailAddress}}&userFname={{userFname}}&userLname={{userLname}}&dobmonth={{dobmonth}}&dobdate={{dobdate}}&dobyear={{dobyear}}&gendervalue1={{gendervalue1}}&stateCode={{stateCode}}&zipcode={{zipcode}}&mobile={{mobile}}&aff_sub3='+session_id}};return fallbackOfferUrls[domainName];}
isNumber(e){var evt=e||window.event;var charCode=evt.which?evt.which:evt.keyCode;if(charCode<48||charCode>57){return false;}
return true;}
replaceQueryParam(param,newval,search){var regex=new RegExp("([?;&])"+param+"[^&;]*[;&]?");var query=search.replace(regex,"$1").replace(/&$/,'');return(query.length>2?query+"&":"?")+(newval?param+"="+newval:'');}
getDomainName(){var hostname=location.hostname.split('.');return hostname.length==2?hostname[0]:hostname[1];}
getRootDomain(){var hostname=window.location.hostname;var domain=hostname.match(/^(?:.*?\.)?([a-zA-Z0-9\-_]{3,}\.(?:\w{2,8}|\w{2,4}\.\w{2,4}))$/)[1];return domain;}
getCreativeDomainUrl(){var _customData13,_customData14;var domain=((_customData13=customData)===null||_customData13===void 0?void 0:_customData13.creativeAssetsPath)||((_customData14=customData)===null||_customData14===void 0?void 0:_customData14.creativeDomain)||"creatives.".concat(this.getRootDomain());return "https://".concat(domain);}
removeMacrosFromString(value){if(!value)return '';try{var macrosRegex=/\s?\{[^}]+\}/g;var str=decodeURIComponent(value);str=str.replace(macrosRegex,'').trim();str=str=='{}'?'':str;return str;}catch(err){return '';}}
checkAnuraExecution(){return new Promise(function(resolve,reject){document.body.addEventListener('anuracomplete',data=>{resolve(data===null||data===void 0?void 0:data.detail);});setTimeout(()=>{resolve(true);},7000);});}
initialiseExitMonetisation(exitOffer){var _experiment_config,_experiment_config2;var flowParam=this.getFlowParam();var isExitMonetizationEnabled=(_experiment_config=experiment_config)===null||_experiment_config===void 0?void 0:_experiment_config.enableExitMonetization;var openExitMonetizationInNewTab=(_experiment_config2=experiment_config)===null||_experiment_config2===void 0?void 0:_experiment_config2.openExitMonetizationInNewTab;if(this.isInAppBrowser()&&openExitMonetizationInNewTab){openExitMonetizationInNewTab=false;}
if(isExitMonetizationEnabled&&openExitMonetizationInNewTab){this.triggerExitMonetisationOffer('newTab',null,exitOffer);}else if(isExitMonetizationEnabled&&!openExitMonetizationInNewTab){this.triggerExitMonetisationOffer('sameTab',null,exitOffer);}else{this.fetchAndRedirect(flowParam.iss+'survey/generic-flow-complete?flow='+flowParam.base64Code);}}
getOfferRedirectionUrl(exitOffer){var campaigndata=campaign_data&&campaign_data.campaignId?campaign_data.campaignId:'';var mobileLsValue=localStorage.getItem('survey-prefix-mobile');var extraParamsArray=[{"key":"aff_sub","value":campaigndata},{"key":"userFname","value":encodeURIComponent(localStorage.getItem('survey-prefix-userFname'))},{"key":"userLname","value":encodeURIComponent(localStorage.getItem('survey-prefix-userLname'))},{"key":"emailAddress","value":encodeURIComponent(localStorage.getItem('survey-prefix-emailAddress'))},{"key":"userAddress","value":encodeURIComponent(localStorage.getItem('survey-prefix-userAddress'))},{"key":"cityName","value":encodeURIComponent(localStorage.getItem('survey-prefix-cityName'))},{"key":"stateCode","value":encodeURIComponent(localStorage.getItem('survey-prefix-stateCode'))},{"key":"zipcode","value":encodeURIComponent(localStorage.getItem('survey-prefix-zipcode'))},{"key":"gender","value":encodeURIComponent(localStorage.getItem('survey-prefix-gendervalue1'))},{"key":"dobmonth","value":encodeURIComponent(localStorage.getItem('survey-prefix-dobmonth'))},{"key":"dobdate","value":encodeURIComponent(localStorage.getItem('survey-prefix-dobdate'))},{"key":"dobyear","value":encodeURIComponent(localStorage.getItem('survey-prefix-dobyear'))},{"key":"aff_sub3","value":session_id},{"key":"leadcookie","value":cookie_id}];if(mobileLsValue&&mobileLsValue.length==10){extraParamsArray.push({"key":"phonecode","value":mobileLsValue.slice(0,3)});extraParamsArray.push({"key":"phoneprefix","value":mobileLsValue.slice(3,6)});extraParamsArray.push({"key":"phonesuffix","value":mobileLsValue.slice(6,10)});}
var url='https://redirect.cap-cloud.co/api/redirect/hasoffer?offeruid=d0ed1815-2343-4fbd-ba20-fb46f7a01eab&offer_id=5050&aff_id=1160';if(exitOffer&&exitOffer.linkoutUrl){url=exitOffer.linkoutUrl;}
var linkoutUrl=new URL(url);extraParamsArray.map(x=>{if(!linkoutUrl.searchParams.get(x.key)){linkoutUrl.searchParams.set(x.key,x.value);}});return linkoutUrl.href+'&aff_sub4='+cookie_id+'&mobile='+mobileLsValue;}
loadTrustedForm(){var _customData15;if((_customData15=customData)!==null&&_customData15!==void 0&&_customData15.isUkTraffic)return;this.hideRegForm();window.trustedformTimeout=setTimeout(()=>{this.showRegForm();},2000);var field='xxTrustedFormCertUrl';var provideReferrer=false;var tf=document.createElement('script');tf.type='text/javascript';tf.async=true;var isTestEnv=window.requestData&&window.requestData.test=="1";var trustedFormUrl='http'+('https:'==document.location.protocol?'s':'')+'://api.trustedform.com/trustedform.js?provide_referrer='+escape(provideReferrer)+'&field='+escape(field)+'&l='+new Date().getTime()+Math.random();if(/stage.|demo./gi.test(window.location.href)||isTestEnv){trustedFormUrl=trustedFormUrl+'&sandbox=true';}
tf.src=trustedFormUrl;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(tf,s);}
checkFullParamData(){var requiredParams=["userFname","userLname","emailAddress","userAddress","mobile","zipcode","cityName","dobdate","dobmonth","dobyear","gendervalue1","stateName"];for(var key of requiredParams){var val=this.removeMacrosFromString(this.getUrlSearchParams(window.location.href).getPii(key));if(val){console.log(key,val);}else return false;}
return true;}
doesAllRequiredParamsExist(){var _window$experiment_co13;var excludedParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var requiredParams=["userFname","userLname","emailAddress","userAddress","mobile","zipcode","cityName","dobdate","dobmonth","dobyear","gendervalue1","stateName"];var excludedParamList=excludedParams.length?excludedParams:((_window$experiment_co13=window.experiment_config)===null||_window$experiment_co13===void 0?void 0:_window$experiment_co13.profileScoreExcludeColumns)||[];requiredParams=requiredParams.filter(k=>!excludedParamList.includes(k));for(var key of requiredParams){var val=this.removeMacrosFromString(this.getUrlSearchParams(window.location.href).getPii(key))||this.removeMacrosFromString(localStorage.getItem('survey-prefix-'+key));if(!val){return false;}}
return true;}
openAppStackExitOfferOnDesktop(){var _experiment_config3,_experiment_config4;var openExitOfferInNewTab=(_experiment_config3=experiment_config)===null||_experiment_config3===void 0?void 0:_experiment_config3.openExitMonetizationInNewTab;var isExitMonetizationEnabled=(_experiment_config4=experiment_config)===null||_experiment_config4===void 0?void 0:_experiment_config4.enableExitMonetization;var isIPhone=/iphone/.test(window.navigator.userAgent.toLowerCase());var exitMonetisationEnabledOnAppStack=experiment_config&&isExitMonetizationEnabled&&experiment_config.exitMonetisationPageName=='appwall'&&openExitOfferInNewTab;return exitMonetisationEnabledOnAppStack&&flowData&&flowData.next_page=='app-wall'&&!isIPhone&&this.getMobileOperatingSystem()!='Android';}
fireExitMonetisationOfferEvent(offerUrl,offer){var offeruid=this.getUrlSearchParams(offerUrl).get('offeruid');var eventTracker=new LEADGEN.tracker();eventTracker.trackCustomEvent('exit','monetisation','offer',{event:'ExitMonetisationOfferOpened',explorationType:offer===null||offer===void 0?void 0:offer.exploration_type,offeruid});}
triggerExitMonetisationOffer(tabType,cb,offer){var windowRef=null;if(tabType=='newTab'){windowRef=window.open("about:blank","_blank");}
if(offer&&offer.linkoutUrl){this.triggerOfferEvents(offer,()=>{this.openExitMonetisationOffer(tabType,windowRef,offer);if(cb)cb();});}else{this.getExitMonetisationOffer().then(res=>{var exitOffer=res&&res.response;if(exitOffer&&exitOffer.linkoutUrl){this.triggerOfferEvents(exitOffer,()=>{this.openExitMonetisationOffer(tabType,windowRef,exitOffer);if(cb)cb();});}else{this.openExitMonetisationOffer(tabType,windowRef);if(cb)cb();}});}}
triggerOfferEvents(offer,cb){var{impressionPixelUrl,linkoutImpressionUrl}=offer;if(impressionPixelUrl){this.callOfferImpressionPixelUrl(impressionPixelUrl);}
if(linkoutImpressionUrl){this.callLinkoutImpressionURL(linkoutImpressionUrl);}
if(offer.clickUrl&&impressionPixelUrl){this.callClickPixel(offer).then(()=>{if(cb)cb();});}else{if(cb)cb();}}
openExitMonetisationOffer(tabType,windowRef,exitOffer){var offerUrl=this.getOfferRedirectionUrl(exitOffer);this.fireExitMonetisationOfferEvent(offerUrl,exitOffer);if(tabType=='newTab'){var flowParam=this.getFlowParam();if(windowRef){windowRef.location=offerUrl;}else{window.open(offerUrl,'_blank');}
this.fetchAndRedirect(flowParam.iss+'survey/generic-flow-complete?flow='+flowParam.base64Code);}else if(tabType=='sameTab'){setTimeout(()=>{window.location.href=offerUrl;},0);}}
getExitMonetisationOffer(){var _flowData6;var url=config.hostApi+'/api/survey/get-exit-linkout';if((_flowData6=flowData)!==null&&_flowData6!==void 0&&_flowData6.flow_page_slug){url=url+'?pageSlug='+flowData.flow_page_slug;}
return this.getApi(url);}
callClickPixel(o){return new Promise((resolve,reject)=>{if(o.clickUrl){var offer_id='';var offeruid='';if(o&&o.linkoutUrl){offer_id=new URL(o.linkoutUrl).searchParams.get('offer_id');offeruid=new URL(o.linkoutUrl).searchParams.get('offeruid');}
var webhookUrl="".concat(config.hostApi,"/event/linkout-click?offerId=").concat(offer_id,"&offeruid=").concat(offeruid,"&clickUrl=").concat(encodeURIComponent(o.clickUrl),"&session_id=").concat(window.session_id);this.getApi(webhookUrl).then(resp=>{console.log('Linkout Click : '+JSON.stringify(resp));return resolve();}).catch(()=>{return reject();});}else if(o!==null&&o!==void 0&&o.fallback){return resolve();}});}
callLinkoutImpressionURL(linkoutImpressionUrl){var i=new Image();i.src=linkoutImpressionUrl;i.width='0';i.height='0';i.style="position:absolute;visibility:hidden;";document.body.appendChild(i);}
callOfferImpressionPixelUrl(url){url=url.replace(/\${AD_POSITION}/gi,0);try{var i=new Image();i.src=url;var frame=document.createElement('iframe');frame.style.display='none';document.body.appendChild(frame);frame.contentDocument.body.appendChild(i);}catch(err){console.log("Coun't Fire pixel ",url);}}
loadJournaya(campaign_id){var s=document.createElement('script');s.id='LeadiDscript_campaign';s.type='text/javascript';s.async=true;s.src='http'+('https:'==document.location.protocol?'s':'')+':'+'//create.lidstatic.com/campaign/'+campaign_id+'.js?snippet_version=2';document.body.appendChild(s);document.body.insertAdjacentHTML('beforeend',"<img\n    src='https://create.leadid.com/noscript.gif?lac=262f10e5-92f1-5de1-e89d-f5f47859f22e&lck=262f10e5-feed-beef-cafe-f5f47859f22e&snippet_version=2' style=\"display:block;height:0;width:0\" />");window.journayaLoaded=true;}
checkAndLoadJournaya(){var _customData16;if((_customData16=customData)!==null&&_customData16!==void 0&&_customData16.isUkTraffic)return;var journayaCampaignId=config&&config.journayaCampaignId?config.journayaCampaignId:null;if(journayaCampaignId&&!window.journayaLoaded){this.loadJournaya(journayaCampaignId);console.log('journaya called from app');}}
handleTcpaOptin(){var _document$querySelect2,_document$querySelect3,_document$querySelect4,_document$querySelect5,_document$querySelect6,_document$querySelect7,_document$querySelect8;var optindetails={'mobile':(_document$querySelect2=document.querySelector('input[name="mobile"]'))===null||_document$querySelect2===void 0?void 0:_document$querySelect2.value,'userFname':(_document$querySelect3=document.querySelector('input[name="userFname"]'))===null||_document$querySelect3===void 0?void 0:_document$querySelect3.value,'userLname':(_document$querySelect4=document.querySelector('input[name="userLname"]'))===null||_document$querySelect4===void 0?void 0:_document$querySelect4.value,'tcpaOptin':(_document$querySelect5=document.querySelector('input[name="tcpaOptin"]'))!==null&&_document$querySelect5!==void 0&&_document$querySelect5.checked?'on':null,'xxTrustedFormToken':(_document$querySelect6=document.querySelector('input[name="xxTrustedFormToken"]'))===null||_document$querySelect6===void 0?void 0:_document$querySelect6.value,'xxTrustedFormCertUrl':(_document$querySelect7=document.querySelector('input[name="xxTrustedFormCertUrl"]'))===null||_document$querySelect7===void 0?void 0:_document$querySelect7.value,'xxTrustedFormPingUrl':(_document$querySelect8=document.querySelector('input[name="xxTrustedFormPingUrl"]'))===null||_document$querySelect8===void 0?void 0:_document$querySelect8.value,'journayaId':window.LeadiD?window.LeadiD.token:null,'delay':1};return this.postApi(config.hostApi+'/api/survey/tcpa-optin',optindetails);}
fireAppStackIframeSuccessEvent(iframeEle,cb){if(iframeEle){var iframeLoadCheckCount=0;var timer=setInterval(()=>{iframeLoadCheckCount++;if(iframeEle&&iframeEle.contentWindow&&iframeEle.contentWindow.length>0){if(cb)cb({loadDuration:iframeLoadCheckCount});clearInterval(timer);return;}
if(iframeLoadCheckCount==60){clearInterval(timer);return;}},1000);}}
fireOnIframeError(iframeEle,iframeType){iframeEle.onerror=()=>{eventTracker.trackCustomEvent('err','page','linkout'+iframeType+'FailedtoLoad',{event:'linkout'+iframeType+'FailedtoLoad'});};}
setCustomData(data){var url=config.hostApi+'/api/survey/set-custom-data';this.postApi(url,data).then(x=>{return x;}).catch(errRes=>{console.log(errRes);});}
setGoogleOptimiseData(data){var url=config.hostApi+'/api/survey/set-google-optimize-data';this.postApi(url,{googleoptimizedata:data,sessionId:window.session_id}).then(x=>{return x;}).catch(errRes=>{console.log(errRes);});}
skipToNextPage(currentPage,eventData,nextPage){var flow=this.getFlowParam();var eventTracker=new LEADGEN.tracker();eventTracker.trackCustomEventPromise('skip','section',currentPage,eventData).then(()=>{var base64Code=flow.base64Code||localStorage.getItem('base64code');var iss=flow.iss||config.hostApi+'/api/';this.fetchAndRedirect(iss+'survey/generic-flow-complete?flow='+base64Code+'&page='+nextPage+'&direct=true');});}
skipToNextPageJHU(currentPage,eventData,nextPage){var flow=this.getFlowParam();var eventTracker=new LEADGEN.tracker();eventTracker.trackCustomEventPromise('skip','section',currentPage,eventData).then(()=>{var base64Code=flow.base64Code||localStorage.getItem('base64code');var iss=flow.iss||config.hostApi+'/api/';setTimeout(()=>{this.fetchAndRedirect(iss+'survey/redirect-to-linkout?flow='+base64Code+'&page='+nextPage+'&direct=true');},1000);});}
loadDynamicDisclaimer(){var submitTypeEle=document.querySelectorAll('[type="submit"]');var ctaText=submitTypeEle&&submitTypeEle.length?submitTypeEle[0].textContent:'Continue';ctaText=ctaText.replaceAll('&nbsp;','').trim();if(document.querySelector('#cta-disclaimer')){var _window$customData4;var disclaimer=((_window$customData4=window.customData)===null||_window$customData4===void 0?void 0:_window$customData4.lander_disclaimer)||this.getFallbackDisclaimer();document.querySelector('#cta-disclaimer').innerHTML=decodeURIComponent(disclaimer.replace('{{ctaText}}',encodeURIComponent(ctaText)));window.isDynamicDisclaimerRendered=true;}}
getFallbackDisclaimer(){var _window$experiment_co14;var type='default';if((_window$experiment_co14=window.experiment_config)!==null&&_window$experiment_co14!==void 0&&_window$experiment_co14.enableCustomBotDetection)type='custombot';if(window.campaign_config&&window.campaign_config.onoSendEmailToArcamax)type='arcamax';var domainName=this.getDomainName();var fallbackDisclaimer={custombot:{theamericansweepstakes:'By clicking {{ctaText}}, I agree to receive emails from TheAmericanSweepstakes and LivingLargeSweeps. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision & the <a href="'+config.hostApi+'/official-rules.html" target="_blank">Official Rules</a> which govern this promotion.',freesamplesprousa:' By clicking {{ctaText}}, I agree to receive emails from FreeSamplesProUSA and LivingLargeSweeps. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.',topsurveyspot:' By clicking {{ctaText}}, I agree to receive emails from TopSurveySpot and LivingLargeSweeps. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.',primerewardspot:' By clicking {{ctaText}}, I agree to receive emails from PrimeRewardSpot and LivingLargeSweeps. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.'},arcamax:{freesamplesprousa:'By clicking {{ctaText}}, I agree to receive relevant emails from FreeSamplesProUSA and the Life Hacks Newsletter, powered by ArcaMax. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.',theamericansweepstakes:'By clicking {{ctaText}}, I agree to receive relevant emails from TheAmericanSweepstakes and the Life Hacks Newsletter, powered by ArcaMax. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.',topsurveyspot:'By clicking {{ctaText}}, I agree to receive relevant emails from TopSurveySpot and the Life Hacks Newsletter, powered by ArcaMax. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.',primerewardspot:'By clicking {{ctaText}}, I agree to receive relevant emails from PrimeRewardSpot and the Life Hacks Newsletter, powered by ArcaMax. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision'},default:{theamericansweepstakes:'By clicking {{ctaText}}, I agree to receive emails from TheAmericanSweepstakes. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision & the <a href="'+config.hostApi+'/official-rules.html" target="_blank">Official Rules</a> which govern this promotion.',freesamplesprousa:'By clicking {{ctaText}}, I agree to receive relevant emails from FreeSamplesProUSA. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision.',topsurveyspot:'By clicking {{ctaText}}, I agree to receive relevant emails from TopSurveySpot. I also agree to the <a href="'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href="'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision',primerewardspot:'By clicking {{ctaText}}, I agree to receive relevant emails from PrimeRewardSpot. I also agree to the <a href = "'+config.hostApi+'/privacy-policy.html" target="_blank">Privacy Policy</a> which includes details on the collection and use of my personal data, and the <a href = "'+config.hostApi+'/terms-and-conditions.html" target="_blank">Terms of Use</a> which includes a mandatory arbitration provision. Eligibility of the gift card reward is subject to completion of <a  onclick="footercontent.openModal(\'program-info\')" class="program-btn">Program Requirements</a>.'}};return fallbackDisclaimer[type][domainName];}
handleGoogleOptimiser(data){var eventTracker=window.LEADGEN?new LEADGEN.tracker():null;if(eventTracker){eventTracker.trackCustomEvent('optimise','imp','google',{event:'GoogleOptimiseDataEvent',data:JSON.stringify(data)});}
this.setGoogleOptimiseData(data).then(res=>{}).catch(err=>{if(eventTracker){eventTracker.trackCustomEvent('optimise','err','google',{event:'GoogleOptimiseDataErrorEvent',error:JSON.stringify(err)});}});}
loadSentryJS(){var _customData17;if(window.sentryRegistered)return;var sen=document.createElement('script');sen.type='text/javascript';sen.async=false;if((_customData17=customData)!==null&&_customData17!==void 0&&_customData17.sentryUrl){var _customData18;sen.src=(_customData18=customData)===null||_customData18===void 0?void 0:_customData18.sentryUrl;}else{var _config;if(((_config=config)===null||_config===void 0?void 0:_config.isCanary)==1){sen.src='https://js.sentry-cdn.com/1f0787d52e367261f85b8d8f76f06718.min.js';}else{sen.src='https://js.sentry-cdn.com/71353c0b6678b68f1de03704aa466d21.min.js';}}
sen.setAttribute('crossorigin','anonymous');sen.onload=function(){try{window.sentryRegistered=true;Sentry.onLoad(function(){var _window$experiment_co15,_window$campaign_conf5,_window$experiment_co16,_window$campaign_conf6,_window28,_window29,_window29$customData,_window30,_window30$config,_window31,_window31$flowData,_window32,_window32$flowData,_window33,_window33$flowData,_window34,_window34$requestData,_window35,_campaign_config2;Sentry.init({release:"leadgen@1.1",sampleRate:((_window$experiment_co15=window.experiment_config)===null||_window$experiment_co15===void 0?void 0:_window$experiment_co15.sentrySamplingRate)||((_window$campaign_conf5=window.campaign_config)===null||_window$campaign_conf5===void 0?void 0:_window$campaign_conf5.sentrySamplingRate)||0.02,tracesSampleRate:((_window$experiment_co16=window.experiment_config)===null||_window$experiment_co16===void 0?void 0:_window$experiment_co16.sentryBrowserTracingSamplingRate)||((_window$campaign_conf6=window.campaign_config)===null||_window$campaign_conf6===void 0?void 0:_window$campaign_conf6.sentryBrowserTracingSamplingRate)||0.02,initialScope:{tags:{domain:(_window28=window)===null||_window28===void 0?void 0:_window28.location.hostname,labelName:(_window29=window)===null||_window29===void 0?void 0:(_window29$customData=_window29.customData)===null||_window29$customData===void 0?void 0:_window29$customData.labelName,siteId:(_window30=window)===null||_window30===void 0?void 0:(_window30$config=_window30.config)===null||_window30$config===void 0?void 0:_window30$config.site_id,template:(_window31=window)===null||_window31===void 0?void 0:(_window31$flowData=_window31.flowData)===null||_window31$flowData===void 0?void 0:_window31$flowData.default_page,templateSlug:(_window32=window)===null||_window32===void 0?void 0:(_window32$flowData=_window32.flowData)===null||_window32$flowData===void 0?void 0:_window32$flowData.flow_page_slug,templateDynamic:(_window33=window)===null||_window33===void 0?void 0:(_window33$flowData=_window33.flowData)===null||_window33$flowData===void 0?void 0:_window33$flowData.is_dynamic_template,cid:(_window34=window)===null||_window34===void 0?void 0:(_window34$requestData=_window34.requestData)===null||_window34$requestData===void 0?void 0:_window34$requestData.cid,isSpa:(_window35=window)!==null&&_window35!==void 0&&_window35.isSpa?'YES':'NO',experimentType:(_campaign_config2=campaign_config)===null||_campaign_config2===void 0?void 0:_campaign_config2.experiment_type}}});});}catch(e){console.log('Sentry Init Error: ',e);}};var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(sen,s);}
removeErrorBlock(event){var elem=event.target;var errorElem=document.querySelector("[name=\"".concat(elem.name,"\"] ~ .error-v2"));var closestParentGrid=document.querySelector("[name=\"".concat(elem.name,"\"]"))?document.querySelector("[name=\"".concat(elem.name,"\"]")).closest('.error-grid-parent'):null;if(!errorElem&&closestParentGrid){errorElem=closestParentGrid.querySelector('.error-v2');}
if(errorElem)errorElem.remove();}
updateLink(){document.querySelectorAll('a').forEach(element=>{var href=element.getAttribute('href');var regHttp=new RegExp("^(http|https)://","i");var matchHref=regHttp.test(href);if(href&&href!=='#'&&matchHref){var updatedhref=this.updateUrl(href);element.setAttribute('href',updatedhref);}});}
updateUrl(href){try{var mainUrlParams=new URLSearchParams(new URL(window.location.href).search);var requiredParams=["t1","t2","t3","t4","t5","t6","t7","t8","t9","ap","lk","ph","eh","canary"];var hrefUrl=new URL(href);requiredParams.forEach(param=>{var mainUrlParamValue=mainUrlParams.get(param);if(hrefUrl.searchParams.get(param)==null&&mainUrlParamValue){hrefUrl.searchParams.append(param,mainUrlParamValue);}});return hrefUrl;}catch(e){console.error("Error in Update Url"+e);return href;}}
isInAppBrowser(){return window.navigator.userAgent.indexOf(" GSA/")!==-1||window.navigator.userAgent.indexOf("musical_ly")!==-1||window.navigator.userAgent.indexOf("FB_IAB")!==-1||window.navigator.userAgent.indexOf('Instagram')!==-1;}
redirectToFullfillment(){var eventTracker=new LEADGEN.tracker();eventTracker.trackCustomEventPromise('click','skip','skip-to-fullfillment',{event:'SkipToFullfillment'}).then(()=>{var _window$customData5;if((_window$customData5=window.customData)!==null&&_window$customData5!==void 0&&_window$customData5.optOutUrl){window.location.href=window.customData.optOutUrl;}});}
appendTCPAOptOutConsent(){var _window$experiment_co17,_window$customData6;if((_window$experiment_co17=window.experiment_config)!==null&&_window$experiment_co17!==void 0&&_window$experiment_co17.enableTCPAOptOutConsent&&(_window$customData6=window.customData)!==null&&_window$customData6!==void 0&&_window$customData6.optOutUrl){document.querySelectorAll('[for="leadid_tcpa_disclosure"]').forEach(ele=>{ele.insertAdjacentHTML('beforeend',' In order to register without providing consent, <a nohref style="cursor:pointer;text-decoration: underline;" onclick="app.redirectToFullfillment()">click here</a>.');});}}
loadPushProvider(callSource){if(window.customData.hasOwnProperty('pushnami_prompt_loc')){var pushnami_prompt_loc=window.customData.pushnami_prompt_loc;}else{pushnami_prompt_loc='lander';}
var pushnamiLoaded=localStorage.getItem('pushnamiLoaded');if(flowData&&experiment_config&&flowData.flow_page_slug.includes(pushnami_prompt_loc)&&callSource===pushnami_prompt_loc&&!pushnamiLoaded){var _window$customData7;localStorage.setItem('pushnamiLoaded',true);if((_window$customData7=window.customData)!==null&&_window$customData7!==void 0&&_window$customData7.enableNotifyAi){var script=document.createElement("script");script.type="text/javascript";script.src="https://trk-keingent.com/scripts/push/script/64d5pzvgj0?url="+encodeURI(self.location.hostname);script.onload=function(){push_init();var sessionId=window.session_id;setSessionId(sessionId);push_subscribe();};document.getElementsByTagName("head")[0].appendChild(script);}else{var _window$customData8,_campaign_config3,_window$customData9;var pushNami=document.createElement('script');if((_window$customData8=window.customData)!==null&&_window$customData8!==void 0&&_window$customData8.enablePushNami&&!this.isInAppBrowser()){pushNami.src=config.hostApi+'/js/pushnami.js';if(experiment_config.pushnamiDelayFlag){setTimeout(()=>{document.body.appendChild(pushNami);},5500);}else{document.body.appendChild(pushNami);}}
if((_campaign_config3=campaign_config)!==null&&_campaign_config3!==void 0&&_campaign_config3.enablePush&&!this.isInAppBrowser()){var pushInvoker=document.createElement('script');pushInvoker.src='/js/push-notification.js';pushInvoker.onload=function(){try{if(typeof window.initialize_mwp_optin==='function'){initialize_mwp_optin();}}catch(e){}};document.body.appendChild(pushInvoker);}else if((_window$customData9=window.customData)!==null&&_window$customData9!==void 0&&_window$customData9.enablePushNami&&!this.isInAppBrowser()&&!this.getUrlSearchParams(window.location.href).has('isRedirected')){var _self2=this;pushNami.onload=()=>{try{if(typeof window.initialize_pushnami==='function'){this.fetchParamsFromURLAndSetToLocalStorage();initialize_pushnami();}}catch(e){}};}}}}
publishDomEvents(type,data){var eventData=new CustomEvent(type,data);document.body.dispatchEvent(eventData);}
fetchParamsFromURLAndSetToLocalStorage(){var list=[];try{list=this.getUrlSearchParams(window.location.href).values();}catch(err){console.log(err);}
for(var key in list){var value=list[key];value=value.split('+').join('%20');value=this.removeMacrosFromString(value);var piimap=this.getPIIMapping();if(key=="dob"&&value){var dob=new Date(Date.parse(value));if(!isNaN(dob)){var month=dob.getMonth()+1;month=month<10?'0'+month:''+month;var date=dob.getDate()<10?'0'+dob.getDate():''+dob.getDate();localStorage.setItem('survey-prefix-dobmonth',month);localStorage.setItem('survey-prefix-dobyear',dob.getFullYear());localStorage.setItem('survey-prefix-dobdate',date);if(window.setIframe&&window.customData.isSubdomain){this.checkLocalStorageData().setData('survey-prefix-dobmonth',month);this.checkLocalStorageData().setData('survey-prefix-dobyear',dob.getFullYear());this.checkLocalStorageData().setData('survey-prefix-dobdate',date);}}}else if(piimap[key]&&value){if(piimap[key]=='mobile'){value=window.decodeURIComponent(value).replace(/[^0-9]/g,'');}
try{localStorage.setItem('survey-prefix-'+piimap[key],window.decodeURIComponent(value));if(window.setIframe&&window.customData.isSubdomain){this.checkLocalStorageData().setData('survey-prefix-'+piimap[key],window.decodeURIComponent(value));}}catch(err){console.log(err);}}}}
gtag(){window.dataLayer=window.dataLayer||[];window.dataLayer.push(arguments);}
handleOptimiserCallback(name,value){console.log('google optimiser callback called from common');this.handleGoogleOptimiser({variant_id:name,experiment_id:value});}
enableGoogleOptimiser(){if(!window.googleOptimiserCalled){this.gtag('event','optimize.callback',{callback:this.handleOptimiserCallback.bind(this)});window.googleOptimiserCalled=true;}}
trustedFormCertUrlCallback(certificateUrl){clearTimeout(window.trustedformTimeout);var eventTracker=window.LEADGEN?new LEADGEN.tracker():null;if(eventTracker){var _window36,_window36$LeadiD;eventTracker.trackCustomEventPromise('imp','section','trustedform',{event:'TrustedformURLLoaded',journayaId:(_window36=window)===null||_window36===void 0?void 0:(_window36$LeadiD=_window36.LeadiD)===null||_window36$LeadiD===void 0?void 0:_window36$LeadiD.token,certificateUrl,session_id:window.session_id}).then(()=>{this.showRegForm();});}else{this.showRegForm();}}
showRegForm(){var _window$experiment_co18,_window$experiment_co19;if(!window.regFormShown&&((_window$experiment_co18=window.experiment_config)!==null&&_window$experiment_co18!==void 0&&_window$experiment_co18.surveyOnPII||(_window$experiment_co19=window.experiment_config)!==null&&_window$experiment_co19!==void 0&&_window$experiment_co19.surveyOnLander)){this.toggleRegForm('show');window.regFormShown=true;}}
toggleRegForm(status){if(document.getElementsByTagName('form')[0]){var submitBtn=document.getElementsByTagName('form')[0].querySelectorAll('[type="submit"]');if(!window.actualBtnDisplayStyle&&submitBtn[0]){window.getComputedStyle(submitBtn[0],null);window.actualBtnDisplayStyle=window.getComputedStyle(submitBtn[0],null).display||'block';}
if(submitBtn[0]){submitBtn[0].style.display=status==='show'?window.actualBtnDisplayStyle:'none';}}}
hideRegForm(){var _window$experiment_co20,_window$experiment_co21;if((_window$experiment_co20=window.experiment_config)!==null&&_window$experiment_co20!==void 0&&_window$experiment_co20.surveyOnPII||(_window$experiment_co21=window.experiment_config)!==null&&_window$experiment_co21!==void 0&&_window$experiment_co21.surveyOnLander){this.toggleRegForm('hide');}}
checkIfAnchorWrapped(linkParent){try{var siblings=linkParent.parentNode.children;if(siblings.length<4)return;var ifUniqueSiblingTypes=Array.from(siblings).filter(element=>element.tagName===linkParent.tagName).length>4;return ifUniqueSiblingTypes;}catch(e){return;}}
appendDynamicFooterLink(){try{var new_link_src=window.customData.onetrustFooterLink||'';var new_link_text='Limit the Use of My Sensitive Personal Information';var unsubLinkArr=[];var newLink;var anchor_id='limitPersonalInfoLink';var searchLinkFormats=['/unsubcribe.html','/unsub.html','/unsubscribe'];var anchors=Array.from(document.querySelectorAll('a'));var _loop2=function _loop2(i){var href=anchors[i].getAttribute('href');if(href&&searchLinkFormats.some(searchLink=>href.indexOf(searchLink)>-1)){unsubLinkArr.push(anchors[i]);}};for(var i=0;i<anchors.length;i++){_loop2(i);}
if(unsubLinkArr.length>0&&!anchors.some(anchor=>anchor.getAttribute('data-id')===anchor_id)){unsubLinkArr.forEach(unsubLink=>{var linkParent=unsubLink.parentNode;if(this.checkIfAnchorWrapped(linkParent)){newLink=linkParent.cloneNode(true);newLink.getElementsByTagName('a')[0].setAttribute('href',new_link_src);newLink.getElementsByTagName('a')[0].setAttribute('data-id',anchor_id);newLink.getElementsByTagName('a')[0].innerText=new_link_text;linkParent.parentNode.appendChild(newLink);}else{newLink=unsubLink.cloneNode(true);newLink.setAttribute('href',new_link_src);newLink.innerText=new_link_text;newLink.setAttribute('data-id',anchor_id);unsubLink.parentNode.appendChild(newLink);}});}}catch(e){console.log('cannot append footer link',e);}}
addMouseTouchEvents(){var self=this;if('ontouchstart'in window){document.addEventListener("touchstart",function(){var _ref4=_asyncToGenerator(function*(event){self.postApi(config.hostApi+'/api/app/mte',{'touchclick':'touch','trusted':event===null||event===void 0?void 0:event.isTrusted});});return function(_x5){return _ref4.apply(this,arguments);};}(),{once:true});}else{document.addEventListener("click",function(){var _ref5=_asyncToGenerator(function*(event){self.postApi(config.hostApi+'/api/app/mte',{'touchclick':'click','trusted':event===null||event===void 0?void 0:event.isTrusted});});return function(_x6){return _ref5.apply(this,arguments);};}(),{once:true});}}
fluentEventsListener(){var _window$experiment_co22;if(!window.fluentListenerRegistered&&(_window$experiment_co22=window.experiment_config)!==null&&_window$experiment_co22!==void 0&&_window$experiment_co22.enableFluentCloseEventTracking){window.fluentListenerRegistered=true;window.addEventListener('message',resp=>{if(resp&&resp.data&&resp.data.fluent_event==='flowContainerClosed'){var _eventTracker8=new LEADGEN.tracker();try{var _flowData7;_eventTracker8.trackCustomEvent('button','click','appwallclosebuttonclick',{event:'appwallCloseButtonClicked',page:(_flowData7=flowData)===null||_flowData7===void 0?void 0:_flowData7.flow_page_slug});}catch(e){}}});}}
loadAntiSpam(){try{var saScript=document.createElement('script');saScript.src="https://pxlrtpge-a.akamaihd.net/javascripts/browserfp.min.js?templateId=28";saScript.async="async";saScript.onload=function(){try{var obj=new browserfp();var pageAttr={template_id:28,cs_id:session_id};obj.setPageAttr(pageAttr);}catch(e){}};document.body.appendChild(saScript);}catch(e){}}}
window.googleOptimiserCalled=false;window.appFileLoaded=true;if(!window.isV2Version){window.addEventListener('DOMContentLoaded',()=>{var app=new App();app.addMouseTouchEvents();app.appendDynamicFooterLink();});}
function consoleLogProxy(){var _config2;if((_config2=config)!==null&&_config2!==void 0&&_config2.isTest){console.info.apply(console,arguments);}};console.log=consoleLogProxy;window.checkIfEventPixelExists=eventObj=>{if(!postbackPixelData)return;return postbackPixelData.some(pixel=>!!pixel.eventDetails&&window.doesEventMatch(pixel.eventDetails.key,eventObj));};window.doesEventMatch=(pixelObj,eventObj)=>{if(!eventObj)return;if(pixelObj.event_name===eventObj.event_name&&pixelObj.event_type===eventObj.event_type&&pixelObj.event_value===eventObj.event_value){return true;}
return;};window.handleEventBasedPixels=function(){var _ref6=_asyncToGenerator(function*(eventData){var app_instance=window.app||window.appInstance||new App();if(app_instance){yield app_instance.checkAndFirePartnerPixel(null,eventData);}});return function(_x7){return _ref6.apply(this,arguments);};}();